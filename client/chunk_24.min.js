(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{597:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function n(r,o){var i,l;try{l=(i=t[r](o)).value}catch(s){return void a(s)}if(!i.done)return Promise.resolve(l).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(l)}("next")}))}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i,l,s,_,u,c,d,m,p,f,h,g,v,b,y,w,x,k,E,S,C,I,T,P,R,N,O,z,A,D,L,j,U,M,B,F,q,H,J,K,Y,W,G,X,Q,V,Z,$,ee,te,ae,ne,re,oe,ie,le,se,_e,ue,ce,de,me,pe,fe,he,ge,ve,be,ye,we,xe,ke,Ee,Se,Ce,Ie,Te,Pe,Re,Ne,Oe,ze,Ae,De,Le,je,Ue,Me,Be,Fe,qe,He,Je,Ke,Ye,We,Ge,Xe,Qe,Ve,Ze,$e,et,tt,at,nt,rt,ot,it,lt,st,_t,ut,ct,dt,mt,pt,ft,ht,gt,vt,bt,yt,wt,xt,kt,Et,St,Ct,It,Tt,Pt,Rt,Nt,Ot,zt,At,Dt,Lt,jt,Ut,Mt,Bt,Ft,qt,Ht,Jt,Kt;Object.defineProperty(t,"__esModule",{value:!0}),i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a,n,r=[],o=!0,i=!1,l=void 0;try{for(a=e[Symbol.iterator]();!(o=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(s){i=!0,l=s}finally{try{!o&&a.return&&a.return()}finally{if(i)throw l}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=Object.assign||function(e){var t,a,n;for(t=1;t<arguments.length;t++)for(n in a=arguments[t])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e},s=function(){function e(e,t){var a,n;for(a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_=a(689),u=n(_),c=a(690),d=a(155),m=n(d),p=a(0),f=n(p),h=a(259),g=n(h),v=a(281),b=n(v),y=a(76),w=n(y),x=a(54),k=n(x),E=n(a(52)),S=a(655),C=n(S),I=a(112),T=n(I),P=a(53),R=n(P),N=a(89),O=n(N),z=a(258),A=n(z),D=a(161),L=n(D),j=a(166),U=n(j),M=a(165),B=n(M),F=a(164),q=n(F),H=a(156),J=n(H),K=a(260),Y=n(K),W=a(111),G=n(W),X=a(110),Q=n(X),V=a(691),Z=n(V),$=a(77),ee=a(71),te=n(ee),ae=a(693),ne=n(ae),re=a(743),oe=n(re),ie=a(420),le=n(ie),se=a(744),_e=n(se),ue=a(417),ce=n(ue),de=a(745),me=n(de),pe=a(817),fe=n(pe),he=a(159),ge=n(he),ve=a(708),be=n(ve),ye=a(710),we=n(ye),xe=a(709),ke=n(xe),Ee=a(704),Se=n(Ee),Ce=a(702),Ie=n(Ce),Te=a(701),Pe=n(Te),Re=a(706),Ne=n(Re),Oe=a(415),ze=n(Oe),Ae=a(819),De=n(Ae),Le=a(707),je=n(Le),Ue=a(672),Me=n(Ue),Be=a(700),Fe=n(Be),qe=a(698),He=n(qe),Je=a(699),Ke=n(Je),Ye=a(820),We=n(Ye),Ge=a(705),Xe=n(Ge),Qe=a(703),Ve=n(Qe),Ze=a(821),$e=n(Ze),et=a(822),tt=n(et),at=a(422),nt=n(at),rt=a(823),ot=n(rt),it=a(824),lt=a(675),st=a(826),_t=a(828),ut=n(_t),ct=a(829),dt=n(ct),mt=a(830),pt=n(mt),ft=a(697),ht=n(ft),gt=a(831),vt=n(gt),bt=a(832),yt=n(bt),wt=a(833),xt=n(wt),kt=a(666),Et=a(684),St=n(Et),Ct=a(660),It=n(Ct),Tt=a(154),Pt=a(834),Rt=n(Pt),Nt=a(835),Ot=n(Nt),zt=a(836),At=n(zt),Dt=a(645),Lt=a(711),jt=n(Lt),Ut=a(665),window.mobileAndTabletCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},Mt=window.mobileAndTabletCheck(),Bt=f.default.lazy((function(){return Promise.all([a.e(17),a.e(16)]).then(a.t.bind(null,925,7))})),Ft=(0,Dt.SIMDopeCreate)({create:{new_of:!0,new_hex:!0},properties:{hsla:!0,hex:!0,rgb:!0}}),qt=Ft.Color,Ht=function(e){var t,a,n,r,i,l,s,_,u,c,d,m,p;return{green:{color:_e.default[700]},red:{color:ce.default[500]},root:(t={contain:"layout size style paint",contentVisibility:"auto",width:"100%",height:"100%",position:"relative",paddingBottom:72},o(t,e.breakpoints.up("lg"),{paddingBottom:0}),o(t,"background","border-box"),t),contentInner:{height:"100%",width:"100%",maxHeight:"100%",position:"relative",display:"flex",contain:"paint style size layout"},contentCanvas:{width:"100%",height:"100%",maxHeight:"100%",display:"inline-block",contain:"paint style size layout !important"},contentDrawer:o({overscrollBehavior:"none",display:"flex",zIndex:1400},e.breakpoints.up("lg"),{display:"none"}),drawerHeader:(a={},o(a,e.breakpoints.down("md"),{padding:"16px 24px 8px 24px"}),o(a,"padding","36px 24px 8px 24px"),o(a,"position","relative"),o(a,"zIndex",-1),o(a,"background","#fff"),a),desktopintrovideowrapper:{cursor:"pointer",margin:"12px 24px",position:"absolute",right:0,top:0,"&:active, &:hover, &:active > video, &:hover > video":{height:96,width:96,transform:"scale(2)",zIndex:1},height:56,width:56,"&::after":{content:"''",background:"#fff !important",position:"absolute",right:0,top:0,width:"10%",height:"15%"}},desktopintrovideo:{position:"absolute",right:0,top:0,height:56,width:56},mobileintrovideowrapper:{zIndex:1,cursor:"pointer",margin:"16px 56px",position:"absolute",right:0,top:0,height:32,width:32,"&::after":{content:"''",background:"#fff !important",position:"absolute",right:0,top:0,width:"10%",height:"15%"}},mobileintrovideo:{position:"absolute",right:0,top:0,height:32,width:32},effectSliderText:{color:"#050c4c",fontWeight:"bold",textTransform:"uppercase"},effectSlider:{color:"#3729c1",padding:"16px 0px","& > .MuiSlider-track":{height:4}},coordinate:{padding:"6px 8px 6px 8px",display:"block",position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0%)",borderRadius:"0px 0px 4px 4px",backgroundColor:"#ededffff",color:"#050c4c",boxShadow:"inset 0px 3px 6px #050c4c4d",whiteSpace:"nowrap"},drawerModalBackdropRoot:{contain:"layout size style paint"},drawerModal:{transform:"translateY(-32px)",marginTop:32,contain:"size layout style",overflow:"hidden"},contentDrawerFixed:(n={zIndex:20,contain:"style size paint layout",boxShadow:"-2px 0px 4px 0px rgb(0 0 0 / 20%), -4px 0px 5px 0px rgb(0 0 0 / 14%), -6px 0px 10px 0px rgb(0 0 0 / 12%)",maxHeight:"100%",height:"100%"},o(n,e.breakpoints.down("md"),{display:"none"}),o(n,"width",480),o(n,"overscrollBehavior","none"),o(n,"display","inline-block"),o(n,"animationFillMode","both"),o(n,"animationName","$drawer"),o(n,"animationDuration","250ms"),o(n,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),o(n,"animationDirection","alternate"),o(n,"animationIterationCount","1"),o(n,"animationDelay","0ms"),o(n,"& > div",{animationFillMode:"both",animationName:"$opacity",animationDuration:"125ms",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",animationDirection:"alternate",animationIterationCount:"1",animationDelay:"150ms"}),n),"@keyframes drawer":{"0%":{transform:"translateX(100%)"},"190%":{transform:"translateX(0%)"}},"@keyframes opacity":{"0%":{filter:"opacity(0)"},"190%":{filter:"opacity(1)"}},"@keyframes menu":{"0%":{transform:"translateY(100%)"},"190%":{transform:"translateY(0%)"}},drawerPaper:{width:480,overflowX:"overlay",background:"#fafafa",contain:"layout paint size style"},swipeableDrawerPaper:{maxWidth:"100%",overscrollBehavior:"none",overflow:"hidden",paddingBottom:"48px",borderBox:"content-box",height:"100%",contain:"layout paint size style"},drawerContainer:(i={transform:"translateZ(10px)",scrollBehavior:"smooth",contain:"size style paint layout",height:"100% !important",overflow:"overlay"},o(i,e.breakpoints.down("md"),{height:"calc(100vh - 180px) !important"}),o(i,e.breakpoints.up("lg"),{overflowX:"hidden"}),o(i,"& > div",{overflowX:"hidden !important",overflowY:"overlay !important",display:"inline !important",width:"100% !important",height:"100% !important",contain:"size style paint layout !important"}),o(i,"& div .react-swipeable-view-container > div",o({overflow:"initial !important",alignItems:"normal",contain:"size style !important",height:"100%"},e.breakpoints.down("md"),{height:"100% !important",paddingBottom:"24px",boxSizing:"border-box"})),o(i,"& div .react-swipeable-view-container > div[aria-hidden=true]",o({},e.breakpoints.up("lg"),{height:"16px"})),o(i,"& div .react-swipeable-view-container > div[aria-hidden=false]  > ul",o({},e.breakpoints.down("md"),{paddingBottom:0})),o(i,"& > div > .react-swipeable-view-container",(r={display:"flex !important",filter:"inherit !important",WebkitFilter:"inherit",willChange:"none !important",height:"100% !important"},o(r,e.breakpoints.up("lg"),{width:480}),o(r,e.breakpoints.down("md"),{width:"100%"}),r)),i),tabs:{contain:"paint size style layout",animationFillMode:"both",animationName:"$menu",animationDuration:"175ms",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",animationDirection:"alternate",animationIterationCount:"1",animationDelay:"0ms",height:72,display:"grid","& .MuiTabs-scroller":{overflowY:"hidden"},"& .MuiTab-root":{minWidth:"auto",flex:"auto"},"& .MuiTabs-indicator":{backgroundColor:"#050c4c"}},"@keyframes bounce":{"0%":{transform:"translate3d(0, 0px, 0) scaleY(1.00)"},"20%":{transform:"translate3d(0, 2px, 0) scaleY(0.95)"},"40%":{transform:"translate3d(0, 0px, 0) scaleY(1.00)"},"70%":{transform:"translate3d(0, -2px, 0) scaleY(1.10)"},"80%":{transform:"translate3d(0, 1px, 0) scaleY(0.95)"},"90%":{transform:"translate3d(0, 0px, 0) scaleY(1.00)"}},tab:{backgroundColor:"#fafafa",color:"#050c4c",transition:"color, background-color cubic-bezier(0.4, 0, 0.2, 1) .275s","&.Mui-selected":{fontWeight:"bold",backgroundColor:"#dfddf2",color:"#050c4c",transition:"color, background-color cubic-bezier(0.4, 0, 0.2, 1) .175s",borderRadius:"4px 4px 0px 0px","& .MuiTab-wrapper":{animationDuration:"375ms",animationTimingFunction:"linear",animationName:"$bounce",transformOrigin:"center bottom"}},"&:hover":{fontWeight:"bold",backgroundColor:"#e8e6f5",color:"#050c4c",transition:"color, background-color cubic-bezier(0.4, 0, 0.2, 1) .175s",borderRadius:"4px 4px 0px 0px","& .MuiTab-wrapper":{animationDuration:"375ms",animationTimingFunction:"linear",animationName:"$bounce",transformOrigin:"center bottom"}},"&:first-child":{borderRadius:"0px 4px 0px 0px"},"&:last-child":{borderRadius:"4px 0px 0px 0px"},"& .MuiTab-wrapper":{fontSize:"11px"},"& .MuiTab-wrapper svg":{width:32,height:32,contentVisibility:"auto"}},tabNoIcon:{backgroundColor:"white",color:"#050c4c",transition:"color, background-color ease-in .175s","&.Mui-selected":{fontWeight:"bold",backgroundColor:"#dfddf2",color:"#050c4c",borderRadius:"4px 4px 0px 0px"},"&.MuiTab-labelIcon":{minHeight:36},"& .MuiTab-wrapper":{fontSize:"11px"},"& .MuiTab-wrapper svg":{width:32,height:32,display:"none",color:"#181063"}},"@keyframes backdropanim":{"0%":{filter:"drop-shadow(0px, 0px, 20px, 20px, #131c955c)"}},backdrop:{zIndex:2e3,color:"#fff",filter:"brightness(1.1) contrast(1.2) drop-shadow(0 0 12px #070b32)",background:"radial-gradient(farthest-corner, #001856d1 20%, #636eff52 80%, #474e9b2b)",contain:"layout paint size style",userSelect:"none",animation:"$backdropanim 16s linear infinite both"},backdropTextContent:{display:"block",textAlign:"center"},fatabs:(l={transition:"transform 45ms cubic-bezier(0.4, 0, 0.2, 1) 5ms",backgroundColor:"#fafafa",boxShadow:"0px 2px 4px -1px rgb(0 0 0 / 20%), 0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%)",contain:"paint size style layout"},o(l,e.breakpoints.up("lg"),{display:"none"}),o(l,e.breakpoints.up("md"),{width:"100%"}),o(l,"zIndex",1300),o(l,"position","fixed"),o(l,"bottom",0),o(l,"right",0),o(l,"width","100%"),o(l,"height",72),l),listOfTools:(s={paddingTop:0},o(s,e.breakpoints.down("md"),{width:"100%"}),o(s,"width",360),s),contextMenuSubheader:{lineHeight:"24px",backgroundColor:"#eee",color:e.palette.secondary.light},contextMenuFuckYouActive:{cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAApCAYAAAAiT5m3AAABXklEQVRYR+2XSxKCMAyGYSXqCdiJev8TqbjjBCqucMJMnDSk6QOKM0hXzPTxNemfB3n2o5GP4Z4OVYf7r/c66KygxfSSCL3Ut+xcHfupEPgoMEBxAHwFa/pZXe0dXaDqVVzLCyeaIkEMs7wxTZEAhUyVHMyhs4KpdTYwj0VNbF6Za7cpukf7Ms7lruaXcVWsZGC8iM3qHszVyhfHWIxg6qamabLnu+2ZXzC+IbqIFvZYsOb+AZgWdviGW5ZlaYSOLaG73p263wqWlEuBEkS6kC3eVbAG97FOi/fkYO4F7M0MVfMkQd/bNucq4KqrYbOk3NnAoF5edbjKYy2n50CeGGQu3tK4XBk6b7wx3ZwSTPO3aLHN3aHW8fX7YmumTL4gldX/A5YKj1iPaZkcGz62uqw2AlO9tfQLmxQsuRiF7ARjTeY9l09oaT/r0T3XssEgMmiBQgcUHbXLDD1wivUfqwJ8Oe4e4FEAAAAASUVORK5CYII=") 17 28, auto',"& .MuiList-padding":{padding:0}},contextMenuFuckYouDisable:{"& .MuiList-padding":{padding:0}},ripple:{contain:"layout paint size style",pointerEvents:"none",contentVisibility:"auto",mixBlendMode:"dodge"},infoIcon:{position:"absolute"},blueCenter:{color:e.palette.secondary.lighter,textAlign:"center",minWidth:"100%"},perspectiveButton:{position:"absolute",left:16,top:16,animationFillMode:"both",animationName:"$fadein",animationDuration:"225ms",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",animationDirection:"alternate",animationIterationCount:"1",animationDelay:"175ms"},saveButton:(_={backgroundColor:"#0037ff14 !important",position:"absolute",right:496,top:16},o(_,e.breakpoints.down("md"),{right:16}),o(_,"animationFillMode","both"),o(_,"animationName","$fadein"),o(_,"animationDuration","225ms"),o(_,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),o(_,"animationDirection","alternate"),o(_,"animationIterationCount","1"),o(_,"animationDelay","175ms"),_),confirmImportButton:(u={position:"absolute",left:16,bottom:16},o(u,e.breakpoints.down("md"),{bottom:88}),o(u,"animationFillMode","both"),o(u,"animationName","$fadein"),o(u,"animationDuration","225ms"),o(u,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),o(u,"animationDirection","alternate"),o(u,"animationIterationCount","1"),o(u,"animationDelay","175ms"),u),zoomInButton:(c={position:"absolute",left:16,bottom:104},o(c,e.breakpoints.down("md"),{bottom:176}),o(c,"animationFillMode","both"),o(c,"animationName","$fadein"),o(c,"animationDuration","225ms"),o(c,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),o(c,"animationDirection","alternate"),o(c,"animationIterationCount","1"),o(c,"animationDelay","175ms"),c),zoomOutButton:(d={position:"absolute",left:16,bottom:60},o(d,e.breakpoints.down("md"),{bottom:132}),o(d,"animationFillMode","both"),o(d,"animationName","$fadein"),o(d,"animationDuration","225ms"),o(d,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),o(d,"animationDirection","alternate"),o(d,"animationIterationCount","1"),o(d,"animationDelay","175ms"),d),redoButton:(m={backgroundColor:"#0037ff14 !important",position:"absolute",right:496,bottom:60},o(m,e.breakpoints.down("md"),{right:16,bottom:132}),o(m,"animationFillMode","both"),o(m,"animationName","$fadein"),o(m,"animationDuration","225ms"),o(m,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),o(m,"animationDirection","alternate"),o(m,"animationIterationCount","1"),o(m,"animationDelay","175ms"),m),undoButton:(p={backgroundColor:"#0037ff14 !important",position:"absolute",right:496,bottom:16},o(p,e.breakpoints.down("md"),{right:16,bottom:88}),o(p,"animationFillMode","both"),o(p,"animationName","$fadein"),o(p,"animationDuration","225ms"),o(p,"animationTimingFunction","cubic-bezier(0.4, 0, 0.2, 1)"),o(p,"animationDirection","alternate"),o(p,"animationIterationCount","1"),o(p,"animationDelay","175ms"),p),"@keyframes fadein":{"0%":{filter:"opacity(0)"},"190%":{filter:"opacity(1)"}},imageBackdrop:{filter:"brightness(1.5) contrast(0.75) drop-shadow(2px 4px 6px black)",width:"min(75vw, 75vh)"}}},Jt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Kt.call(a),a.st4te={classes:e.classes,load_with:e.load_with+"",_history:$.HISTORY,_perspective:!1,_library_dialog_open:!1,_library:{},_library_type:"open",_view_name_index:1,_handle_wheel_timestamp:Date.now(),_view_name_sub_index:0,_previous_view_name_index:1,_view_names:["palette","image","layers","tools","selection","effects","filters"],_canvas:null,_loading:!1,_loading_process:"",_can_undo:0,_can_redo:0,_current_color:"#ffffffff",_second_color:"#000000ff",_pxl_current_opacity:1,_width:32,_height:32,_import_size:"192",_import_colorize:"0",_hue:360,_slider_value:.25,_slider_value_width:192,_slider_value_height:96,_game_ended:!1,_tool:Mt?"MOVE":"PENCIL",_memory_tool:Mt?"MOVE":"PENCIL",_previous_tool_timestamp:1/0,_select_mode:"REPLACE",_pencil_mirror_mode:"NONE",_filters:[],_x:-1,_y:-1,_drag_file:!1,_is_something_selected:!1,_hide_canvas_content:!1,_show_original_image_in_background:!1,_show_transparent_image_in_background:!0,_is_image_import_mode:!1,_layers:[],_layer_index:0,_previous_layer_index:0,_mine_player_direction:"UP",_is_edit_drawer_open:!1,_kb:0,_saved_at:Date.now(),_fps:0,_prev_fps:0,_menu_mouse_y:null,_menu_mouse_x:null,_menu_data:{},_menu_event:null,_ripple:null,_ripple_color:"#ffffffff",_ripple_opacity:1,_is_pixel_dialog_post_edit_open:!1,_is_dialog_info_open:!1,_base64_url:"",_logged_account:{},_less_than_1280w:!1,_is_pixel_dialog_create_open:!1,_attachment_previews:{},_swipeable_drawer_handle_filters_thumbnail_change:function(){},_swipeable_drawer_set_props:function(){},_toolbox_container_ref:{},_files_waiting_download:[],_time_ago_initiated:!1,_fps_el:{},_xy_el:{},_settings:g.default.unpack(e.settings)},a.sraf=Object.create(jt.default).init(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"setSt4te",value:function(e,t){var a,n=Object.keys(e),r=0|n.length,o="";for(a=0;(0|a)<(0|r);a=(a+1|0)>>>0)o=n[a],this.st4te[o]=e[o];"function"==typeof t&&t()}},{key:"componentWillMount",value:function(){te.default.trigger_loading_update(0),te.default.trigger_page_render_complete(),setTimeout((function(){te.default.trigger_loading_update(100)}),300)}},{key:"componentDidMount",value:function(){var e=this;te.default.trigger_snackbar("Awesome buddy! Welcome back to the laboratory.",3500),(0,Tt.l)(null,(function(){e._compute_menu_drawer(),e.setSt4te({_time_ago_initiated:!0})}),!0),setTimeout((function(){e.st4te._is_pixel_dialog_create_open&&(te.default.trigger_snackbar("Right here! Let's upload a picture now to create a new artwork.",6e3),setTimeout((function(){e.st4te._is_pixel_dialog_create_open&&(te.default.trigger_snackbar("By the way, ...",1e3),setTimeout((function(){e.st4te._is_pixel_dialog_create_open&&(te.default.trigger_snackbar("Huh, let me take my breath! ...",1500),setTimeout((function(){e.st4te._is_pixel_dialog_create_open&&te.default.trigger_snackbar("You can set the size of your artwork before uploading your picture.",1e4)}),3e3))}),1500))}),8500))}),9e3),te.default.jamy_update("happy"),window.addEventListener("resize",this._updated_dimensions),window.addEventListener("wheel",this._prevent_ctrl_zoom,{passive:!1}),document.addEventListener("keydown",this._handle_keydown),document.addEventListener("keyup",this._handle_keyup);try{document.getElementById("tabs-desktop").addEventListener("wheel",this._handle_wheel,{passive:!1})}catch(t){}b.default.register(this._handle_events.bind(this)),this.setSt4te({_h_svg:(0,kt.createLocalBlob)((0,It.default)(f.default.createElement(St.default,{color:"#e5e5e5"}))),_h_svg_size:"100px 115px"}),(0,m.default)((function(){return a.e(42).then(a.t.bind(null,940,7))})).then((function(t){e.setSt4te({_library:t})})),this._set_saved_at_element(),this._try_load_with_payload(this.st4te.load_with),setTimeout((function(){e._request_force_update(!1,!0).then((function(){e._updated_dimensions()}))}),1e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.load_with!==this.st4te.load_with?this.setSt4te(l({_settings:g.default.unpack(e.settings)},e),(function(){t._compute_menu_drawer(),t._request_force_update().then((function(){t._try_load_with_payload(t.st4te.load_with)}))})):this.setSt4te(l({_settings:g.default.unpack(e.settings)},e))}},{key:"_handle_events",value:function(e){var t=this;if("TRIGGER_CANVAS_ACTION"===e.type)switch(e.data.name.toUpperCase()){case"CONTRAST":this._to_auto_medium_more_contrast();break;case"SATURATION":this._to_auto_medium_more_saturation();break;case"PALETTE":this._less_colors_auto();break;case"SMOOTH":this._smooth_adjust();break;case"FILTER":this._handle_edit_drawer_open(null,6);break;case"RENDER":this._handle_edit_drawer_open(null,1),setTimeout((function(){t._handle_edit_drawer_open(null,1),setTimeout((function(){t._handle_edit_drawer_open(null,1)}),100)}),100)}}},{key:"componentWillUnmount",value:function(){this._backup_state(),te.default.stop_sound(),window.removeEventListener("resize",this._updated_dimensions),window.removeEventListener("wheel",this._prevent_ctrl_zoom);try{document.getElementById("tabs-desktop").removeEventListener("wheel",this._handle_wheel,{passive:!1})}catch(e){}document.removeEventListener("keydown",this._handle_keydown),document.removeEventListener("keyup",this._handle_keyup),clearInterval(this.st4te._saved_at_interval)}},{key:"render",value:function(){var e=this,t=this.st4te,a=t.classes,n=t._canvas,r=t._loading,o=t._loading_process,i=t._is_image_import_mode,l=t._hide_canvas_content,s=t._show_original_image_in_background,_=t._show_transparent_image_in_background,c=t._can_undo,d=t._can_redo,m=t._current_color,h=t._slider_value,g=t._tool,v=t._import_size,b=t._hue,y=t._select_mode,x=t._pencil_mirror_mode,E=t._kb,S=t._mine_player_direction,C=t._menu_data,I=t._ripple_color,T=t._ripple_opacity,P=t._library_dialog_open,R=t._library,N=t._is_pixel_dialog_create_open,z=t._h_svg,A=t._h_svg_size,D=t._attachment_previews,L=t._perspective,j=t._files_waiting_download,U=t._time_ago_initiated,M=t._settings,B=t._text_dialog_open,F=t._drag_file;return C.pos_x=-1===C.pos_x?"out":C.pos_x,C.pos_y=-1===C.pos_y?"out":C.pos_y,f.default.createElement("div",{style:{height:"100%",position:"relative",pointerEvents:"none",userSelect:"none"},ref:this._set_root_ref},f.default.createElement("div",{className:a.root},f.default.createElement("div",{className:a.contentInner,style:{backgroundColor:"#f7f7f7",backgroundImage:'url("'+z+'")',backgroundRepeat:"repeat",backgroundSize:A,textRendering:"optimizespeed",imageRendering:"optimizespeed"}},f.default.createElement(p.Suspense,{fallback:f.default.createElement("div",{className:a.contentCanvas})},f.default.createElement(Bt,{set_compressor:this._set_png_compressors,perspective:L?2:0,on_state_export:this._handle_canvas_state_will_export,on_state_exported:this._handle_canvas_state_exported,on_fps_change:this._handle_fps_change,export_state_every_ms:Mt?3e5:21e4,shadow_size:Mt?0:1.5,key:"canvas",className:a.contentCanvas,ref:this._set_canvas_ref,tool:g,canvas_wrapper_padding:8,hide_canvas_content:l,show_original_image_in_background:s&&!0,show_transparent_image_in_background:_,select_mode:y,pencil_mirror_mode:x,hue:b,bucket_threshold:h,color_loss:h,pxl_current_opacity:1,onLoadComplete:this._handle_load_complete,onLoad:this._handle_load,onCanUndoRedoChange:this._handle_can_undo_redo_change,onSizeChange:this._handle_size_change,onCurrentColorChange:this._handle_current_color_change,onSomethingSelectedChange:this._handle_something_selected_change,onImageImportModeChange:this._handle_image_import_mode_change,onPositionChange:this._handle_position_change,onLayersChange:this._handle_layers_change,onFiltersThumbnailChange:this._handle_filters_thumbnail_change,onGameEnd:this._handle_game_end,onRelevantActionEvent:this._handle_relevant_action_event,setCursorFuckYou:this._set_cursor_fuck_you,onRightClick:this._handle_right_click,mine_player_direction:S,pxl_current_color:m,convert_scale:1,default_size:v,ideal_size:v,max_size:1.5*v,fast_drawing:!0,px_per_px:1})),this.drawer_desktop,this.menu)),f.default.createElement("div",{style:{pointerEvents:"all"}},f.default.createElement(k.default,{className:a.perspectiveButton,color:"primary",size:"small",onClick:this._toggle_perspective},L?f.default.createElement(tt.default,null):f.default.createElement($e.default,null)),f.default.createElement(w.default,{className:a.saveButton,variant:"text",color:"primary",onClick:this._backup_state},f.default.createElement("span",{id:"saved_at"},"?")," ",f.default.createElement(We.default,null)," ",E<.5?"?":Math.round(10*E)/10," kB"),f.default.createElement(w.default,{disabled:!i,className:a.confirmImportButton,color:"primary",size:"small",onClick:function(){i?n.confirm_import():e._import_image_library()}},f.default.createElement(u.default,null)," ",i?"OK":"Import"),f.default.createElement(k.default,{className:a.zoomOutButton,color:"primary",size:"small",onClick:function(){n.zoom_out()}},f.default.createElement(Ot.default,null)),f.default.createElement(k.default,{className:a.zoomInButton,color:"primary",size:"small",onClick:function(){n.zoom_in()}},f.default.createElement(Rt.default,null)),f.default.createElement(w.default,{disabled:!d,variant:"text",color:"primary",size:"small",className:a.redoButton,onClick:function(t){e._redo()}},(-d||"")+" Redo"," ",f.default.createElement(De.default,{style:{transition:"ease-out 225ms transform 25m",transform:"rotate(+"+(360*d+90)+"deg)"}})),f.default.createElement(w.default,{disabled:!c,variant:"text",color:"primary",size:"small",className:a.undoButton,onClick:function(t){e._undo()}},f.default.createElement(De.default,{style:{transition:"ease-out 225ms transform 25ms",transform:"rotate(-"+(360*c+90)+"deg)"}}),(+c||"")+" Undo")),this.drawer_mobile,f.default.createElement(ot.default,{keepMounted:!1,open:!!P,object:R,onClose:this._close_library,onSelectImage:this._from_library}),f.default.createElement(At.default,{keepMounted:!1,open:!!B,onClose:this._close_text,onSuccess:this._draw_text}),f.default.createElement(fe.default,{keepMounted:!1,theme_day:M._theme_day,open:!!N,pixel_arts:U?D:{},size:v,on_import_size_change:this._set_import_size,on_pixel_art_delete:this._delete_unsaved_pixel_art,import_JSON_state:this._handle_import_json_state_id,on_upload:this._handle_file_upload,onClose:this._handle_pixel_dialog_create_close}),f.default.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0,contain:"paint size style layout",visibility:"auto"}},f.default.createElement(Z.default,{className:a.ripple,ref:this._set_ripple_ref,center:!1,style:{color:I,opacity:T,position:"fixed",width:"100%",height:"100%"}}),f.default.createElement(O.default,{style:{pointerEvents:"all",cursor:"pointer"},onDrag:this._handle_file_upload,className:a.backdrop,open:!!(r||j.length>0||F+1e3>Date.now())},f.default.createElement("div",{className:a.backdropTextContent,style:{fontFamily:'"Industry Book"',textTransform:"uppercase"},onClick:this._continue_download},!F&&!!(r||j.length>0)&&f.default.createElement("h1",null,f.default.createElement(nt.default,{key:o||r,text:"browser"===o?"Laboratory in DANGER!":"LABORATORY PROCESSING",animation_delay_ms:0,animation_duration_ms:200})),!F&&j.length>0&&f.default.createElement("h3",null,f.default.createElement(nt.default,{key:j[0].name,text:"ACTION REQUIRED... "+j[0].name,animation_delay_ms:300,animation_duration_ms:500})),!F&&j.length>0&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/DOWNLOAD.svg",className:a.imageBackdrop})),!F&&j.length>0&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",style:{textShadow:"0px 0px 16px white"},text:"CLICK ON THE SCREEN TO CONTINUE DOWNLOAD!",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&r&&"browser"===o&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Doesn't feel like home for our dear code here.",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&r&&"browser"===o&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please download an advanced browser.",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&r&&"image_ai"===o&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"AI processing your image",animation_delay_ms:300,animation_duration_ms:500})),F&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/ABDUCTION.svg",className:a.imageBackdrop})),F&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"Drop the file to the UFO.",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500})),F&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Ready for a new image abduction?",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&r&&"image_ai"===o&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/MOLECULE.svg",className:a.imageBackdrop})),!F&&0===j.length&&r&&"image_ai"===o&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~10sec.",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&r&&"image_preload"===o&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Preparing laboratory",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&r&&"image_preload"===o&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/SCIENCE.svg",className:a.imageBackdrop})),!F&&0===j.length&&r&&"image_preload"===o&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~"+parseInt(3*parseFloat(v/100))*(Mt?3:1)+"sec.",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&r&&"image_load"===o&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Abducting your image",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&r&&"image_load"===o&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/ABDUCTION.svg",className:a.imageBackdrop})),!F&&0===j.length&&r&&"image_load"===o&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~"+parseInt(4*parseFloat(v/100))*(Mt?3:1)+"sec.",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&r&&"image_render"===o&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/COMPUTING.svg",className:a.imageBackdrop})),!F&&0===j.length&&r&&"image_render"===o&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Atomic rendering in process",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&r&&"image_render"===o&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~14sec.",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&r&&"less_color"===o&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Coupling few color DNA",animation_delay_ms:300,animation_duration_ms:500})),!F&&0===j.length&&r&&"less_color"===o&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/GENOMA.svg",className:a.imageBackdrop})),!F&&0===j.length&&r&&"less_color"===o&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~4sec.",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500})),!F&&0===j.length&&r&&"less_color_auto"===o&&f.default.createElement("h3",null,f.default.createElement(nt.default,{text:"Coupling the DNA of many color",animation_delay_ms:500,animation_duration_ms:500})),!F&&0===j.length&&r&&"less_color_auto"===o&&f.default.createElement("div",null,f.default.createElement("img",{src:"/src/images/labostration/GENOMA.svg",className:a.imageBackdrop})),!F&&0===j.length&&r&&"less_color_auto"===o&&f.default.createElement("h4",null,f.default.createElement(nt.default,{pre:"[... ",app:" ...]",text:"It can take a while, please wait ~7sec.",animation_delay_ms:Mt?5e3:2500,animation_duration_ms:500}))))))}}]),t}(f.default.PureComponent),Kt=function(){var e,t=this;this._request_force_update=function(e,a){return e=void 0===e||e,a=void 0!==a&&a,t.sraf.run_frame((function(){return new Promise((function(e,a){t.forceUpdate(e)}))}),!e,!a,Date.now(),"page_pixel").catch((function(){return t._request_force_update(e,a)}))},this._set_fps_and_xy_elements=function(){setTimeout((function(){t.st4te._less_than_1280w?t.setSt4te({_fps_el:{},_xy_el:{}}):t.setSt4te({_fps_el:document.getElementById("fps_el")||{},_xy_el:document.getElementById("xy_el")||{}})}),1e3)},this._prevent_ctrl_zoom=function(e){e.ctrlKey&&e.preventDefault()},this._set_saved_at_element=function(){t.st4te._saved_at_el||t.setSt4te({_saved_at_el:document.getElementById("saved_at")},(function(){var e=setInterval((function(){t.st4te._saved_at_el.innerText=(0,Tt.t)(t.st4te._saved_at||Date.now(),{mini:!0})}),1e3);t.setSt4te({_saved_at_interval:e})}))},this._try_load_with_payload=function(e){var n,r,o;0===e.length?(ge.default.get_settings(t._process_settings_info_result),setTimeout((function(){t.setSt4te({_is_pixel_dialog_create_open:!(0!==e.length)},(function(){t._compute_menu_drawer(),t._request_force_update()}))}),725)):(n=!!e.startsWith("data:image/png;base64,"),r=n?"image/png":"image/jpeg",o=t.st4te._import_size,t._handle_load("image_preload"),(0,lt.base64_to_bitmap)(e,(function(e){var n,l,s,_,u;te.default.trigger_voice("data_upload"),l=Mt?512:1024,s=parseInt((n=Mt?960:1440)*n),_=Math.min(parseInt(262144),Math.max(parseInt(o*o),parseInt(l*l))),u=Math.min(parseInt(262144),parseInt(o*o)),(0,lt.bitmap_to_imagedata)(e,s,(function(e){(0,m.default)((function(){return Promise.resolve().then(a.t.bind(null,652,7))})).then((function(a){var n=a.QuantiMatGlobal;(0,lt.imagedata_to_base64)(e,r,(function(e){(0,lt.base64_to_bitmap)(e,(function(a){(0,lt.bitmap_to_imagedata)(a,_,(function(a){n(a,256).then((function(a){var n=i(a,6),r=n[0],o=(n[1],n[2],n[3]),l=n[4],s=n[5];null===r?(window.dispatchEvent(new Event("art-upload-browsererror")),t._handle_load_complete("image_preload",{}),t._handle_load("browser"),te.default.trigger_sfx("alert_high-intensity",.6),te.default.jamy_update("flirty"),te.default.trigger_snackbar("That's our end my little buddy! My instinctive dwelling require a browser I am supporting.",6e3),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity",.7),te.default.jamy_update("sad"),te.default.trigger_snackbar("Abandon, misfortune, sadness... I can't live in this strange place.",7e3),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity",.8),te.default.jamy_update("suspicious"),te.default.trigger_snackbar("Ho no! I just can't, but someone needs to give me back my usual laboratory environment!",7e3),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity",.9),te.default.jamy_update("shocked"),te.default.trigger_snackbar("Yes my enjoyable smartness, gladly you hear me now! Everything gonna be alright to look at me!",9e3),setTimeout((function(){te.default.jamy_update("happy"),te.default.trigger_sfx("alert_high-intensity",1),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity",1)}),750)}),4e3)}),8e3)}),8e3)}),7e3)):(setTimeout((function(){te.default.trigger_snackbar("I am really awesome, within "+parseFloat(s/1e3).toFixed(3)+"sec. I've made disappears "+o+" colors, now there are "+l+" colors!",5700),setTimeout((function(){te.default.jamy_update("happy")}),2e3)}),15e3),(0,lt.imagedata_to_base64)(r,"image/png",(function(a){(0,lt.base64_to_bitmap)(a,(function(a){(0,lt.bitmap_to_imagedata)(a,u,(function(a){(0,lt.imagedata_to_base64)(a,"image/png",(function(a){var n=new Image;n.addEventListener("load",(function(){t._handle_load_complete("image_preload",{}),t.setSt4te({_kb:0,_saved_at:1/0}),t.st4te._canvas.set_canvas_from_image(n,e,{},!1)}),{once:!0,capture:!0}),n.src=a}))}))}))}),C.default))}),C.default)}))}),C.default)}),C.default)})).catch((function(e){t._handle_load_complete("image_preload",{}),te.default.trigger_snackbar("Be sure to have a recent browser or install Google Chrome for using it.",5700),te.default.jamy_update("angry")}))}))}),C.default))},this._handle_canvas_state_will_export=function(){te.default.trigger_loading_update(0),te.default.jamy_update("suspicious"),te.default.trigger_snackbar("Ok buddy! Saving yours.",1500),window.onbeforeunload=function(e){return"Your content that was being saved will be lost."}},this._handle_canvas_state_exported=function(e){if(te.default.trigger_loading_update(75),te.default.jamy_update("flirty"),te.default.trigger_snackbar("Hold on! Compressing...",1e3),e.kb>.5){var a={};a["json_state-ID"+e.id+".json.lz"]=e,t.setSt4te({_kb:e.kb,_saved_at:Date.now()},(function(){t._compute_menu_drawer(),t._request_force_update(),ge.default.set_settings({},(function(e,t){e&&(te.default.trigger_loading_update(100),te.default.trigger_snackbar("Looks like I can't save your file as our compression module can't load.",5700),te.default.jamy_update("angry"))}),a,c.UJS,C.default,(function(e,t){te.default.trigger_loading_update(100),e?(window.onbeforeunload=function(e){},te.default.trigger_snackbar("Laboratory artwork failed to save.",2e3),te.default.jamy_update("sad")):(window.onbeforeunload=function(e){},setTimeout((function(){setTimeout((function(){te.default.jamy_update("happy")}),500),te.default.trigger_snackbar("Success! Laboratory's artwork saved!",2e3)}),1e3))}))}))}else te.default.trigger_loading_update(100),window.onbeforeunload=function(e){},setTimeout((function(){te.default.trigger_snackbar("Huh, we don't store nearly empty file up here, buddy.",2e3)}),2e3)},this._handle_import_json_state_id=function(e){(0,m.default)((function(){return Promise.resolve().then(a.t.bind(null,690,7))})).then((function(a){var n=a.UJS;t._handle_load("image_preload"),te.default.trigger_voice("accessing_memory"),ge.default.get_settings((function(){}),["json_state-ID"+e+".json.lz"],t._process_settings_attachment_result,n,C.default)})).catch((function(){te.default.trigger_snackbar("Looks like I can't get your file as our compression module can't load.",5700),te.default.jamy_update("angry")}))},this._delete_unsaved_pixel_art=function(e){var a={};a["json_state-ID"+e+".json.lz"]="delete",ge.default.set_settings({},t._process_settings_info_result,a,null,null,(function(a,n){if(a)te.default.trigger_snackbar("DELETION, Failed!",2e3);else{te.default.trigger_snackbar("DELETION, Successful!",2e3),te.default.trigger_sfx("alert_high-intensity");var r=Object.assign({},t.st4te._attachment_previews);delete r["json_state-ID"+e+".json.lz"],t.setSt4te({_attachment_previews:r},(function(){t._request_force_update()}))}}))},this._updated_dimensions=function(){var e=document.documentElement,a=document.body||document.getElementsByTagName("body")[0],n=window.innerWidth||e.clientWidth||a.clientWidth,r=(window.innerHeight||e.clientHeight||a.clientHeight,!!(n<1280));t.setSt4te({_less_than_1280w:r},(function(){t._compute_menu_drawer(),t._compute_menu_drawer(),t._request_force_update(!1,!1).then((function(){t._set_fps_and_xy_elements()}))}))},this._handle_wheel=function(e){var a,n,r=e.deltaY;t.st4te._handle_wheel_timestamp+150<Date.now()&&(a=0===r?0:r>0?1:-1,(n=t.st4te._view_name_index+a|0)<0?n=t.st4te._view_name_index=t.st4te._view_names.length-1|0:n%=t.st4te._view_names.length+1|0,t._handle_view_name_change(n,t.st4te._view_name_index,(function(){t.setSt4te({_handle_wheel_timestamp:Date.now()})})))},this._handle_menu_close=function(){t.setSt4te({_menu_mouse_x:null,_menu_mouse_y:null},(function(){t._compute_menu_right_click(),t._request_force_update()}))},this._handle_right_click=function(e,a){a.pxl_color=t.st4te._canvas.get_pixel_color_from_pos(a.pos_x,a.pos_y),t.setSt4te({_menu_mouse_x:e.clientX-2,_menu_mouse_y:e.clientY-4,_menu_data:a,_menu_event:e},(function(){t._compute_menu_right_click(),t._request_force_update()}))},this._set_cursor_fuck_you=function(e){te.default.jamy_update("happy",2500)},this._process_settings_info_result=function(e,a){if(!e&&void 0!==a){var n=void 0!==a.attachment_previews?a.attachment_previews:{};t.setSt4te({_attachment_previews:n},(function(){t._request_force_update()}))}},this._process_settings_attachment_result=function(e,a){var n=t.st4te._canvas.import_JS_state;t._handle_load_complete("image_preload",{}),e?(te.default.trigger_snackbar("Looks like I can't get your file as something was erroneous.",5700),te.default.jamy_update("angry"),t._handle_pixel_dialog_create_open()):(t.setSt4te({_kb:a.kb,_saved_at:Date.now()},(function(){t._request_force_update()})),n(a,(function(){t.setSt4te({_is_pixel_dialog_create_open:!1,_attachment_previews:{}},(function(){t._request_force_update()}))})))},this._handle_view_name_change=function(e){var a,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},s=t.st4te,_=s._view_names,u=s._toolbox_container_ref;o=null===o?t.st4te._view_name_index:o,a=_[e]||_[0],o>(n=-1===_.indexOf(a)?0:_.indexOf(a))?te.default.trigger_sfx("navigation_transition-left"):o<n&&te.default.trigger_sfx("navigation_transition-right"),(r={})._view_name_sub_index=0,u.scrollTop=0,t.setSt4te(l({},r,{_previous_view_name_index:o||t.st4te._view_name_index,_view_name_index:n}),(function(){t._set_props_bypass_this(),t._compute_menu_drawer(),t._request_force_update(),i()}))},this._handle_view_name_switch=function(e,a){var n,r,o,i,s,_,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;("mouse"===e.pointerType&&0===e.button||"mouse"!==e.pointerType)&&(r=(n=t.st4te)._view_names,o=n._toolbox_container_ref,u=null===u?t.st4te._view_name_index:u,i=r[a]||r[0],u>(s=-1===r.indexOf(i)?0:r.indexOf(i))?te.default.trigger_sfx("navigation_transition-left"):te.default.trigger_sfx("navigation_transition-right"),_={},u!==s&&(_._view_name_sub_index=0,o.scrollTop=0),t.setSt4te(l({},_,{_previous_view_name_index:u||t.st4te._view_name_index,_view_name_index:s}),(function(){t._set_props_bypass_this(),t._compute_menu_drawer(),t._request_force_update()})))},this._handle_keydown=function(e){var a,n,r,o,i;if(e.ctrlKey&&(document.getElementsByClassName("MuiInput-root Mui-focused").length?"c"===!e.key&&"v"===!e.key&&(e.preventDefault(),e.stopImmediatePropagation()):(e.preventDefault(),e.stopImmediatePropagation())),n=(a=t.st4te)._tool,r=a._view_name_index,o=a._view_names,i=a._is_pixel_dialog_post_edit_open,e&&!i){if("MINE"===n)switch(e.keyCode){case 38:t.setSt4te({_mine_player_direction:"UP"});break;case 40:t.setSt4te({_mine_player_direction:"DOWN"});break;case 37:t.setSt4te({_mine_player_direction:"LEFT"});break;case 39:t.setSt4te({_mine_player_direction:"RIGHT"})}else switch(e.keyCode){case 37:t._handle_view_name_change(r-1<0?o.length-1:r-1);break;case 39:t._handle_view_name_change(r+1>o.length-1?0:r+1);break;case 38:t._scroll_to_drawer(-1);break;case 40:t._scroll_to_drawer(1)}"1"===e.key?t._handle_view_name_change(0):"2"===e.key?t._handle_view_name_change(1):"3"===e.key?t._handle_view_name_change(2):"4"===e.key?t._handle_view_name_change(3):"5"===e.key?t._handle_view_name_change(4):"6"===e.key?t._handle_view_name_change(5):"7"===e.key?t._handle_view_name_change(6):e.ctrlKey&&"z"===e.key?t._undo():e.ctrlKey&&"y"===e.key?t._redo():e.ctrlKey&&"m"===e.key?t._set_tool("MINE"):e.ctrlKey&&"o"===e.key?t._upload_image():e.ctrlKey&&"i"===e.key?t._handle_file_import():e.ctrlKey||"o"!==e.key?e.ctrlKey||"b"!==e.key?e.ctrlKey||"h"!==e.key?e.ctrlKey||"x"!==e.key?e.ctrlKey||"u"!==e.key?e.ctrlKey||"r"!==e.key?e.ctrlKey&&"r"===e.key?t._set_tool("SELECT RECTANGLE"):e.ctrlKey||"e"!==e.key?e.ctrlKey&&"e"===e.key?t._set_tool("SELECT ELLIPSE"):e.ctrlKey||"l"!==e.key?e.ctrlKey&&"l"===e.key?t._set_tool("SELECT LINE"):e.ctrlKey||"p"!==e.key?e.ctrlKey||"n"!==e.key?e.ctrlKey&&"p"===e.key?t._set_tool("SELECT PIXEL"):e.ctrlKey&&"n"===e.key?t._set_tool("SELECT PENCIL PERFECT"):e.ctrlKey||"m"!==e.key?e.ctrlKey||"f"!==e.key?e.ctrlKey&&"f"===e.key?t._set_tool("SELECT PATH"):e.ctrlKey&&"k"===e.key?t._set_tool("SELECT COLOR THRESHOLD"):e.ctrlKey&&"g"===e.key?t._set_tool("SELECT COLOR"):e.ctrlKey&&"q"===e.key?t._download_image(1):e.ctrlKey&&"s"===e.key?t._download_image(32):"Enter"===e.key?(0,t.st4te._canvas.confirm_import)():e.ctrlKey?n.includes("SELECT")?(t.setSt4te({_previous_tool_timestamp:Date.now()}),t._set_select_mode("REMOVE")):(t.setSt4te({_previous_tool_timestamp:Date.now()}),t._set_tool("PICKER",!1)):"Shift"===e.key&&(n.includes("SELECT")?(t.setSt4te({_previous_tool_timestamp:Date.now()}),t._set_select_mode("ADD")):(t.setSt4te({_previous_tool_timestamp:Date.now()}),t._set_tool("MOVE",!1))):t._set_tool("CONTOUR"):t._set_tool("SET PENCIL MIRROR"):t._set_tool("PENCIL PERFECT"):t._set_tool("PENCIL"):t._set_tool("LINE"):t._set_tool("ELLIPSE"):t._set_tool("RECTANGLE"):t._set_tool("BORDER"):t._set_tool("EXCHANGE"):t._set_tool("HUE BUCKET"):t._set_tool("BUCKET"):t._set_tool("PICKER")}},this._undo=function(){(100*Math.random()|0)>90&&te.default.trigger_snackbar("That was a nice undo!"),t.st4te._canvas.undo()},this._redo=function(){(100*Math.random()|0)>95&&(te.default.jamy_update("suspicious"),te.default.trigger_snackbar("Even nicer redo! Doo,doo,doo...",2500),setTimeout((function(){te.default.jamy_update("annoyed"),te.default.trigger_snackbar("Did I already said that today? I won't feel much smarter today.",3500),setTimeout((function(){te.default.jamy_update("shocked"),te.default.trigger_snackbar("No, huh!? I have feelings.",2500),setTimeout((function(){te.default.jamy_update("flirty"),te.default.trigger_snackbar("I am a real booooy! Yuhhh!")}),3e3)}),4e3)}),3e3)),t.st4te._canvas.redo()},this._set_png_compressors=function(){var e=t.st4te._canvas.set_png_compressors;(0,m.default)((function(){return a.e(0).then(a.t.bind(null,654,7))})).then((function(t){var n=t.png_quant;(0,m.default)((function(){return a.e(1).then(a.t.bind(null,663,7))})).then((function(t){var a=t.oxi_png;e(n,a)}))}))},this._backup_state=function(){var e=t.st4te._canvas,n=e.export_state,r=e.set_png_compressors;(0,m.default)((function(){return a.e(0).then(a.t.bind(null,654,7))})).then((function(e){var t=e.png_quant;(0,m.default)((function(){return a.e(1).then(a.t.bind(null,663,7))})).then((function(e){var a=e.oxi_png;r(t,a),n()}))}))},this._download_image=function(e){var n=t.st4te._canvas,r=n.get_base64_png_data_url,o=n.xxhashthat,i=n.set_png_compressors;window.dispatchEvent(new Event("art-download-raster"+e)),void 0!==r&&void 0!==o&&void 0!==i&&(0,m.default)((function(){return a.e(0).then(a.t.bind(null,654,7))})).then((function(n){var l=n.png_quant;(0,m.default)((function(){return a.e(1).then(a.t.bind(null,663,7))})).then((function(a){var n=a.oxi_png;i(l,n),r(e,!1,1,100,100).then((function(a){var n=a.url,r=o(n),i=document.createElement("a");i.download="PIXAPICS-"+r+"-PIXELATED-"+e+"x_RAS.png",i.href=n,i.click(),i.remove(),t._propose_selling_nft()}))}))}))},this._download_svg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xbrz",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=t.st4te._canvas,s=l.get_base64_png_data_url,_=l.set_png_compressors,u=l.xxhashthat;window.dispatchEvent(new Event("art-download-vector"+e.toLowerCase())),te.default.trigger_voice("please_wait"),te.default.trigger_snackbar("Please wait... Files will download in a few seconds.",5700),te.default.jamy_update("happy"),t.setSt4te({_loading:!0,_loading_process:"image_render"},(function(){(0,m.default)((function(){return a.e(0).then(a.t.bind(null,654,7))})).then((function(l){var c=l.png_quant;(0,m.default)((function(){return a.e(1).then(a.t.bind(null,663,7))})).then((function(a){var l=a.oxi_png;_(c,l),s(1,!0,1,100,100).then((function(a){var l=a.url,s=a.colors,_=u(l),c=t.st4te._files_waiting_download;c.push({name:"PIXAPICS-"+_+"-PIXELATED-1x_RAS.png",url:l}),t.setSt4te({_files_waiting_download:c},(function(){t._request_force_update()})),te.default.trigger_voice("processing"),(0,it.base64png_to_xbrz_svg)(l,(function(a,n,r,o){var l=t.st4te._files_waiting_download;l.push({name:"PIXAPICS-"+_+"-"+e.toUpperCase()+"-"+n+"x_RAS.png",url:""+a}),t.setSt4te({_files_waiting_download:l},(function(){t._request_force_update(),i?(0,st.postJSON)("https://real-life-image.pixa-pics.workers.dev/init",""+a,(function(e,a){a&&(0,st.postJSON)("https://real-life-image.pixa-pics.workers.dev/get",""+a,(function(e,a){a&&a.split(" ").forEach((function(e){fetch(e).then((function(e){e.blob().then((function(e,a){new Promise((function(t,a){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(){var a=URL.createObjectURL(e);t(a)},n.readAsDataURL(e)})).then((function(e){l.push({name:"PIXAPICS-"+_+"-PHOTO-REAL-BIG+AI_RAS-#"+a+".jpg",url:""+e}),t.setSt4te({_files_waiting_download:l},t._request_force_update)}))}))}))}))}),"application/text")}),"application/text"):(te.default.trigger_snackbar("Looks like we had an unexpected issue",5700),te.default.jamy_update("angry"))}))}),(function(a,n){if(a.length>0){var r=t.st4te._files_waiting_download;r.push({name:"PIXAPICS-"+_+"-"+e.toUpperCase()+"-"+n+"x_VEC.svg",url:a}),t.setSt4te({_files_waiting_download:r},(function(){t._request_force_update()}))}t.setSt4te({_loading:!1,_loading_process:""},(function(){t._propose_selling_nft()}))}),(function(a,n){if(a.length>0){var r=t.st4te._files_waiting_download;r.push({name:"PIXAPICS-"+_+"-"+e.toUpperCase()+"-"+n+"+CRT.png",url:a}),t.setSt4te({_files_waiting_download:r},(function(){t._request_force_update()}))}}),Array.from(s),e,!!n,!!r,!!o)}))}))}))}))},this._propose_selling_nft=function(){te.default.trigger_voice("complete"),te.default.trigger_sfx("hero_decorative-celebration-02"),te.default.trigger_snackbar("Fantastic!",1500),setTimeout((function(){te.default.trigger_share(),window.dispatchEvent(new Event("home-action-tryshare")),setTimeout((function(){te.default.trigger_sfx("alert_high-intensity"),te.default.trigger_snackbar("Your unique and stunning pixel art can now be turned into a valuable digital asset through the power of blockchain technology.",7e3),setTimeout((function(){te.default.trigger_sfx("hero_decorative-celebration-02"),te.default.trigger_snackbar("Sell your pixel art as an NFT on your favourite platform and become a part of the growing NFT community.",9e3)}),8e3)}),2e3)}),2e3)},this._continue_download=function(){var e,a,n=t.st4te._files_waiting_download;n.length>0&&(e=n.shift(),(a=document.createElement("a")).download=""+e.name,a.href=""+e.url,a.click(),delete e.url,delete e.name,a.remove(),t.setSt4te({_files_waiting_download:n},(function(){t._request_force_update()})))},this._handle_keyup=function(e){var a,n,r,o,i;e.ctrlKey&&(document.getElementsByClassName("MuiInput-root Mui-focused").length?"c"===!e.key&&"v"===!e.key&&(e.preventDefault(),e.stopImmediatePropagation()):(e.preventDefault(),e.stopImmediatePropagation())),a=t.st4te._is_pixel_dialog_post_edit_open,e&&!a&&(r=(n=t.st4te)._tool,o=n._memory_tool,i=n._previous_tool_timestamp,o&&o!==r&&Date.now()-1e4<i?(t.setSt4te({_previous_tool_timestamp:1/0}),t._set_tool(o)):i<Date.now()&&r.includes("SELECT")&&(t.setSt4te({_previous_tool_timestamp:1/0}),t._set_select_mode("REPLACE")))},this._upload_image=function(e){t._handle_file_upload(e)},this._upload_image_library=function(){t.setSt4te({_library_dialog_open:!0,_library_type:"open"},(function(){t._request_force_update()}))},this._close_library=function(){t.setSt4te({_library_dialog_open:!1},(function(){t._request_force_update()}))},this._from_library=function(e){var a=t.st4te._library_type,n=t.st4te._canvas,r=n.set_canvas_from_image,o=n.import_image_on_canvas,i=new Image;i.src=e,i.onload=function(){"open"===a?(t.setSt4te({_kb:0,_saved_at:1/0},(function(){t._request_force_update()})),r(i)):"import"===a&&o(i,e),t._close_library()}},this._handle_file_upload=(e=r(regeneratorRuntime.mark((function e(a){var n,o,i,l,s,_,u,c,d,m,p,f,h,g,v,b,y,w,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"dataTransfer"in a&&a.dataTransfer.files.length>0&&(a.preventDefault(),a.stopPropagation()),t.st4te._drag_file&&t.setSt4te({_drag_file:0},(function(){t._request_force_update()})),n=(a.target||{}).files||(a.srcElement||{}).files||(a.currentTarget||{}).files||((a.path||[])[0]||{}).files||(a.dataTransfer||{}).files||[],o=n[0]||null,i=null;for(l=0;l<n.length;l++)(i=n[l]).type.startsWith("image/")&&(l=n.length);s=new Ut.FloranceCaptionerAPI(te.default.trigger_snackbar),_=new Ut.FaceToAllAPI(te.default.trigger_snackbar),u=new Ut.FaceToAllAPI2(te.default.trigger_snackbar),null===i&&null===o?(te.default.trigger_snackbar("Looks like I can't get your file as something is erroneous.",5700),te.default.jamy_update("angry")):null!==i&&(c=!("image/png"!==i.type),d=c?"image/png":i.type,m=t.st4te,p=m._import_colorize,f=m._import_size,h=t.st4te._canvas.set_canvas_from_image,v=parseInt((g=Mt?623.5382907247958:881.8163074019441)*g),b=Math.min(parseInt(262144),parseInt(f*f)),y=1,w=function(){var e=r(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._handle_load("image_preload"),te.default.trigger_voice("data_upload"),(0,lt.file_to_imagedata_resized)(a,v,(function(e){(0,lt.imagedata_to_base64)(e,d,(function(a){for(;Math.round(e.width*y)*Math.round(e.height*y)>b;)y-=.01;(0,lt.base64_sanitize)(a,(function(e){(0,lt.base64_to_bitmap)(e,(function(e){(0,lt.bitmap_to_imagedata)(e,e.width*e.height|0,(function(e){(0,lt.imagedata_to_base64)(e,"image/png",(function(e){var n=new Image;n.addEventListener("load",(function(){t._handle_load_complete("image_preload",{}),t.setSt4te({_kb:0,_saved_at:1/0}),h(n,a,{},!1),setTimeout((function(){te.default.trigger_snackbar("I am really awesome, here is your pixel art!",5700),setTimeout((function(){te.default.jamy_update("happy")}),2e3)}),1e3)}),{once:!0,capture:!0}),n.src=e}),C.default)}),C.default)}),C.default)}),null,y,"doppel")}),C.default)}),C.default);case 3:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}(),0===parseInt(p)?w(i).then((function(){})):(x=function(){var e=r(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.default.jamy_update("angry"),te.default.trigger_voice("processing"),te.default.trigger_loading_update(10),te.default.jamy_update("annoyed",8e3),te.default.trigger_loading_update(20),setTimeout((function(){te.default.jamy_update("annoyed",8e3),te.default.trigger_loading_update(20)}),5e3),e.next=8,s.run(t,1);case 8:return a=e.sent,te.default.trigger_snackbar("IMAGE: "+a,5e3),e.abrupt("return",u.run(t,a).then((function(e){return te.default.jamy_update("flirty",666),te.default.trigger_loading_update(100),te.default.trigger_snackbar("Receiving results (3 sec)"),te.default.jamy_update("happy",666),te.default.trigger_sfx("alert_high-intensity",1,"md"),te.default.trigger_loading_update(0),te.default.trigger_snackbar("AI Processing [OK]"),k._handle_load_complete("image_ai",{}),k._handle_load("image_preload"),Promise.resolve(e)})).catch((function(){return _.run(t,a).then((function(e){return te.default.jamy_update("flirty",666),te.default.trigger_loading_update(100),te.default.trigger_snackbar("Receiving results (3 sec)"),te.default.jamy_update("happy",666),te.default.trigger_sfx("alert_high-intensity",1,"md"),te.default.trigger_loading_update(0),te.default.trigger_snackbar("AI Processing [OK]"),k._handle_load_complete("image_ai",{}),k._handle_load("image_preload"),Promise.resolve(e)})).catch((function(){return te.default.trigger_loading_update(0),te.default.trigger_snackbar("AI PROCESSING FAILED! Fallback to normal mode."),k._handle_load_complete("image_ai",{}),k._handle_load("image_preload"),Promise.resolve(t)}))})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),k=t,t._handle_load("image_ai"),x(i).then((function(e){w(e)}))));case 10:case"end":return e.stop()}}),e,t)}))),function(t){return e.apply(this,arguments)}),this._handle_file_import=function(e){var a,n,r,o,i=(e.target||{}).files||(e.srcElement||{}).files||(e.currentTarget||{}).files||((e.path||[])[0]||{}).files||[],l=(i[0],null);for(a=0;a<i.length;a++)(n=i[a]).type.startsWith("image/")&&(l=n);null!==l&&(r=new Image,o=t.st4te._canvas.import_image_on_canvas,(0,lt.file_to_base64)(l,(function(e){r.onload=function(){o(r,e),t._handle_menu_close()},r.src=e}),C.default))},this._import_image_library=function(){t.setSt4te({_library_dialog_open:!0,_library_type:"import"},(function(){t._request_force_update()}))},this._handle_load=function(e){te.default.trigger_loading_update(0),t.setSt4te({_loading:!0,_loading_process:e},(function(){t._request_force_update()})),"image_preload"===e&&(t._handle_edit_drawer_close(),t._handle_menu_close(),t._handle_pixel_dialog_create_close())},this._handle_load_complete=function(e,a){te.default.trigger_loading_update(100),t.setSt4te({_loading:!1,_loading_process:e},(function(){t._request_force_update().then((function(){t.st4te._saved_at>Date.now()-60&&t._backup_state(),t._updated_dimensions()}))})),"less_color"===e||"less_color_auto"===e?0!==a.colors_removed&&(te.default.trigger_snackbar("I am a magician! And "+a.colors_removed+" colors are now gone, only "+a.colors_remaining+" remaining."),te.default.trigger_sfx("navigation_selection-complete-celebration"),te.default.jamy_update("happy")):"image_load"===e&&(a.only_scan?te.default.trigger_sfx("ui_scan"):(te.default.trigger_sfx("ui_scan"),te.default.trigger_snackbar("DONE! We've imported an image with my now "+a.number_of_colors+" colors."),setTimeout((function(){te.default.trigger_voice("complete")}),1e3),te.default.jamy_update("happy"),t._handle_edit_drawer_close(),t._handle_menu_close(),t._handle_pixel_dialog_create_close()))},this._set_ripple_ref=function(e){null!=e&&t.setSt4te({_ripple:e})},this._set_canvas_ref=function(e){null!=e&&t.setSt4te({_canvas:e,_filters:e.get_filter_names()},(function(){t._request_force_update()}))},this._handle_position_change=function(e){var a,n;void 0!==t.st4te._xy_el&&(a=-1===e.x?"out":e.x+1,n=-1===e.y?"out":e.y+1,t.st4te._xy_el.textContent=" | X: "+a+", Y: "+n+" ")},this._handle_fps_change=function(e){void 0!==t.st4te._fps_el&&(t.st4te._fps_el.textContent="FPS: "+e)},this._handle_can_undo_redo_change=function(e,a){e=parseInt(e),a=parseInt(a);var n=!(t.st4te._can_undo===e&&t.st4te._can_redo===a);t.setSt4te({_can_undo:e,_can_redo:a},(function(){n&&t._request_force_update()}))},this._handle_size_change=function(e,a){var n=!(t.st4te._width===e&&t.st4te._height===a);t.setSt4te({_width:e,_height:a},(function(){n&&(t._compute_menu_drawer(),t._request_force_update())}))},this._handle_current_color_change=function(e,a){e=void 0!==e.rgb?qt.new_of(e.rgb.r,e.rgb.g,e.rgb.b,Math.round(parseInt(255*e.rgb.a))).hex:qt.new_hex(e).hex;var n=qt.new_hex(e).hsla[0];t.setSt4te({_current_color:e,_hue:n})},this._handle_relevant_action_event=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ffffff",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.st4te._ripple;e&&r&&(te.default.trigger_sfx("navigation_selection-complete-celebration"),0!==n&&t.setSt4te({_ripple_color:a,_ripple_opacity:n},(function(){setTimeout((function(){r.start(e)}),25),setTimeout((function(){r.stop(e)}),200)})))},this._handle_something_selected_change=function(e){var a=!(t.st4te._is_something_selected===e);t.setSt4te({_is_something_selected:e},(function(){a&&(t._compute_menu_right_click(),t._request_force_update())}))},this._set_value_from_slider_with_update=function(e,a){t.setSt4te({_slider_value:a||e.target.value},(function(){t._set_props_bypass_this()}))},this._set_width_from_slider=function(e,a){t.setSt4te({_slider_value_width:a||e.target.value},(function(){t._set_props_bypass_this()}))},this._set_height_from_slider=function(e,a){t.setSt4te({_slider_value_height:a||e.target.value},(function(){t._set_props_bypass_this()}))},this._set_import_size=function(e,a){t.setSt4te({_import_size:a||e.target.value})},this._set_import_colorize=function(e,a){t.setSt4te({_import_colorize:a||e.target.value})},this._revert_tool=function(){t.setSt4te({_tool:t.st4te._memory_tool})},this._set_tool=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.setSt4te({_tool:e.toUpperCase()},(function(){t._set_props_bypass_this()})),a&&t.setSt4te({_memory_tool:e.toUpperCase()})},this._set_select_mode=function(e){t.setSt4te({_select_mode:e.toUpperCase()},(function(){t._set_props_bypass_this()}))},this._set_pencil_mirror_mode=function(e){t.setSt4te({_pencil_mirror_mode:e.toUpperCase()},(function(){t._set_props_bypass_this()}))},this._switch_with_second_color=function(){var e=t.st4te,a=e._current_color,n=e._second_color;t.setSt4te({_current_color:n,_second_color:a},(function(){t._set_props_bypass_this()}))},this._show_hide_canvas_content=function(){t.setSt4te({_hide_canvas_content:!t.st4te._hide_canvas_content},(function(){t._set_props_bypass_this(),t.forceUpdate()}))},this._show_hide_background_image=function(){t.setSt4te({_show_original_image_in_background:!t.st4te._show_original_image_in_background},(function(){t._set_props_bypass_this()}))},this._show_hide_transparent_image=function(){t.setSt4te({_show_transparent_image_in_background:!t.st4te._show_transparent_image_in_background},(function(){t._set_props_bypass_this()}))},this._handle_image_import_mode_change=function(e){t.setSt4te({_is_image_import_mode:e},(function(){t._set_props_bypass_this(),t._request_force_update()}))},this._handle_layers_change=function(e,a){t.setSt4te({_previous_layer_index:parseInt(t.st4te._layer_index),_layer_index:parseInt(e),_layers:a},(function(){t._set_props_bypass_this()}))},this._handle_filters_thumbnail_change=function(e,a,n){t.st4te._swipeable_drawer_handle_filters_thumbnail_change(e,a,n)},this._set_filters_callback=function(e){t.setSt4te({_swipeable_drawer_handle_filters_thumbnail_change:e})},this._set_props_callback=function(e){t.setSt4te({_swipeable_drawer_set_props:e},(function(){t._set_props_bypass_this(),t._request_force_update()}))},this._set_props_bypass_this=function(){var e=t.st4te,a=e._view_name_index,n=e._previous_view_name_index,r=e._layers,o=e._layer_index,i=e._hide_canvas_content,l=e._show_original_image_in_background,s=e._show_transparent_image_in_background,_=e._hue,u=e._current_color,c=e._second_color,d=e._slider_value,m=e._tool,p=e._width,f=e._height,h=e._filters,g=e._select_mode,v=e._pencil_mirror_mode,b=e._is_something_selected,y=e._is_image_import_mode,w=e._import_size,x=e._import_colorize,k=e._slider_value_width,E=e._slider_value_height;t.st4te._canvas&&t.st4te._canvas._set_props({tool:m,hide_canvas_content:i,show_original_image_in_background:l&&!0,show_transparent_image_in_background:s,select_mode:g,pencil_mirror_mode:v,hue:_,bucket_threshold:d,color_loss:d,pxl_current_color:u,default_size:w,ideal_size:w,max_size:1.5*w}),t.st4te._swipeable_drawer_set_props({view_name_index:a%7,previous_view_name_index:n%7,layers:r,layer_index:o,hide_canvas_content:i,show_original_image_in_background:l,show_transparent_image_in_background:s,hue:_,current_color:u,second_color:c,slider_value:parseFloat(d),slider_value_width:k,slider_value_height:E,tool:m,width:parseInt(p),height:parseInt(f),filters:h,select_mode:g,pencil_mirror_mode:v,is_something_selected:b,is_image_import_mode:y,import_size:w,import_colorize:x})},this._handle_game_end=function(){t.setSt4te({_game_ended:!0},(function(){setTimeout((function(){t.setSt4te({_game_ended:!1})}),5e3)}))},this._handle_edit_drawer_open=function(e,a){var n,r,o,i,l,s,_;a=void 0!==a?a:t.st4te._view_name_index,n=!(t.st4te._view_name_index!==a)&&t.st4te._is_edit_drawer_open,r=t.st4te._toolbox_container_ref,o=!0,i=void 0,n&&null!==r?(l="swipetoolbox_i_"+a+"_"+(i=t.st4te._view_name_sub_index||0),i++,null!==(s=(document.getElementsByClassName(l)||[])[0]||null)?r.scrollTop=s.offsetTop:(i=0,r.scrollTop=0)):(i=0,r.scrollTop=0),_=!(t.st4te._is_edit_drawer_open===o&&t.st4te._view_name_index===a),t.setSt4te({_is_edit_drawer_open:o,_view_name_index:a,_view_name_sub_index:i},(function(){_&&(t._compute_menu_drawer(),t._request_force_update())}))},this._handle_edit_drawer_close=function(){var e=!!t.st4te._is_edit_drawer_open;t.setSt4te({_is_edit_drawer_open:!1},(function(){e&&(t._compute_menu_drawer(),t._request_force_update())}))},this._set_current_color=function(e){t._handle_menu_close(),t.setSt4te({_current_color:e},(function(){t._set_props_bypass_this()}))},this._exchange_pixel_colors=function(e,a,n){var r=t.st4te._canvas.exchange_pixel_color,o=t.st4te._menu_data;r(e,a,n),o.pxl_color=n,t._handle_menu_close(),t.setSt4te({_menu_data:o})},this._to_auto_medium_more_contrast=function(){(0,t.st4te._canvas.auto_adjust_contrast)(.2),te.default.trigger_voice("enhanced")},this._to_auto_medium_more_saturation=function(){(0,t.st4te._canvas.auto_adjust_saturation)(.2),te.default.trigger_voice("enhanced")},this._less_colors_auto=function(){var e=t.st4te,a=e._layers,n=e._layer_index,r=t.st4te._canvas.to_less_color;te.default.trigger_voice("please_wait"),(a[n]||{}).number_of_colors,r("auto")},this._get_average_color_of_selection=function(){var e=(0,t.st4te._canvas.get_average_color_of_selection)();t._handle_current_color_change(e)},this._handle_pixel_dialog_create_close=function(){t.setSt4te({_is_pixel_dialog_create_open:!1,_attachment_previews:{}},(function(){t._request_force_update()}))},this._handle_pixel_dialog_create_open=function(){!1===t.st4te._is_pixel_dialog_create_open&&te.default.trigger_sfx("hero_decorative-celebration-02"),ge.default.get_settings(t._process_settings_info_result),setTimeout((function(){t.setSt4te({_is_pixel_dialog_create_open:!0},(function(){t._request_force_update()}))}),725)},this._set_toolbox_container_ref=function(e){null!=e&&t.setSt4te({_toolbox_container_ref:e})},this._set_root_ref=function(e){null!=e&&t.setSt4te({_root_ref:e},(function(){t.st4te._root_ref.addEventListener("drop",t._handle_file_upload,{capture:!0}),t.st4te._root_ref.addEventListener("dragenter",t._drop_start),t.st4te._root_ref.addEventListener("dragover",t._drop_start),t.st4te._root_ref.addEventListener("dragleave",t._drop_end)}))},this._drop_start=function(e){e.preventDefault(),e.stopPropagation(),t.setSt4te({_drag_file:Date.now()},(function(){t._request_force_update()}))},this._drop_end=function(e){e.preventDefault(),e.stopPropagation(),t.st4te._drag_file&&t.setSt4te({_drag_file:0},(function(){t._request_force_update()}))},this._scroll_to_drawer=function(e){var a,n,r,o;if((""+e).startsWith("swipetoolbox_i_"))a=(document.getElementsByClassName(e)||[])[0]||null,t.st4te._toolbox_container_ref.scrollTop=null!==a?a.offsetTop:0;else{for(n=t.st4te._toolbox_container_ref.scrollTop,r=(document.getElementsByClassName("swipetoolbox_i_"+t.st4te._view_name_index+"_0")||[])[0]||{},o=1;r;){if(!(n>r.offsetTop)){r=(document.getElementsByClassName("swipetoolbox_i_"+t.st4te._view_name_index+"_"+(o-1+e))||[])[0]||{};break}r=(document.getElementsByClassName("swipetoolbox_i_"+t.st4te._view_name_index+"_"+o++)||[])[0]||{}}t.st4te._toolbox_container_ref.scrollTop=r.offsetTop||0}},this._toggle_perspective=function(){var e=!t.st4te._perspective;e?(te.default.trigger_voice("vision_activated"),t._set_tool("MOVE",!1)):(te.default.trigger_voice("vision_deactivated"),t._revert_tool()),t.setSt4te({_perspective:e},(function(){t._request_force_update()}))},this._smooth_adjust=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,t.st4te._canvas.smooth_adjust)(e)},this._close_text=function(){t.setSt4te({_text_dialog_open:!1},(function(){t._request_force_update()}))},this._open_text=function(){t.setSt4te({_text_dialog_open:!0},(function(){t._request_force_update()}))},this._draw_text=function(e,a){t._close_text(),(0,t.st4te._canvas.write_text)(e,a)},this._resume_video=function(){try{document.getElementById("labintro-video").play()}catch(e){}},this._compute_menu_right_click=function(){var e=t.st4te,a=e.classes,n=e._canvas,r=e._current_color,o=e._tool,i=e._width,l=e._height,s=e._pencil_mirror_mode,_=e._is_something_selected,u=e._menu_mouse_y,c=e._menu_mouse_x,d=e._menu_data,m=e._menu_event;d.pos_x=-1===d.pos_x?"out":d.pos_x,d.pos_y=-1===d.pos_y?"out":d.pos_y,t.menu=f.default.createElement(J.default,{className:a.contextMenuFuckYouDisable,PaperProps:{style:{maxHeight:380,width:240,overflowY:"overlay",contain:"paint style layout",scrollBehavior:"smooth",userSelect:"none",pointerEvents:u||c?"all":"none"}},onContextMenu:function(e){e.preventDefault()},MenuListProps:{dense:!0},transitionDuration:{enter:125,exit:250},open:!!u||!!c,onClose:t._handle_menu_close,disablePortal:!1,keepMounted:!0,anchorReference:"anchorPosition",anchorPosition:{top:0|u,left:0|c}},f.default.createElement("span",{style:{textAlign:"left",padding:"12px 8px",color:"#666"}},"X: ",d.pos_x,", Y: ",d.pos_y),f.default.createElement("div",{style:"SET PENCIL MIRROR"===o||"NONE"!==s?{}:{display:"none"}},f.default.createElement(Y.default,{className:a.contextMenuSubheader},"Tools"),f.default.createElement(T.default,{button:!0,divider:!0,disabled:"PENCIL"===o,onClick:function(){t._set_tool("PENCIL")}},f.default.createElement(Q.default,null,f.default.createElement(He.default,null)),f.default.createElement(G.default,{primary:"Pencil"})),f.default.createElement(T.default,{button:!0,divider:!0,disabled:"PENCIL PERFECT"===o,onClick:function(){t._set_tool("PENCIL PERFECT")}},f.default.createElement(Q.default,null,f.default.createElement(Ke.default,null)),f.default.createElement(G.default,{primary:"Pencil perfect"})),f.default.createElement(Y.default,{className:a.contextMenuSubheader},"Mirror mode"),[{icon:f.default.createElement(Fe.default,null),disabled:"NONE"===s,text:"None",on_click:function(){t._set_pencil_mirror_mode("NONE")}},{icon:f.default.createElement(Fe.default,null),disabled:"VERTICAL"===s,text:"Vertical",on_click:function(){t._set_pencil_mirror_mode("VERTICAL")}},{icon:f.default.createElement(Fe.default,null),disabled:"HORIZONTAL"===s,text:"Horizontal",on_click:function(){t._set_pencil_mirror_mode("HORIZONTAL")}},{icon:f.default.createElement(Fe.default,null),disabled:"BOTH"===s,text:"Both",on_click:function(){t._set_pencil_mirror_mode("BOTH")}}].map((function(e){return f.default.createElement(T.default,{key:e.text,button:!0,divider:!0,disabled:e.disabled,onClick:e.on_click},f.default.createElement(Q.default,null,e.icon),f.default.createElement(G.default,{primary:e.text}))}))),f.default.createElement("div",{style:_?{}:{display:"none"}},f.default.createElement(Y.default,{className:a.contextMenuSubheader},"Apply to selection"),[{icon:f.default.createElement(Ve.default,null),text:"Unselect",on_click:function(){n.to_selection_none()}},{icon:f.default.createElement(Pe.default,null),text:"Colorize dynamical",on_click:function(){n.to_selection_changes(r,!1)}},{icon:f.default.createElement(Xe.default,null),text:"Get average color",on_click:function(){t._get_average_color_of_selection()}},{icon:f.default.createElement(Se.default,null),text:"Shrink",on_click:function(){n.to_selection_size(-1)}},{icon:f.default.createElement(Se.default,null),text:"Grow",on_click:function(){n.to_selection_size(1)}},{icon:f.default.createElement(Ie.default,null),text:"Border",on_click:function(){n.to_selection_border()}},{icon:f.default.createElement(Pe.default,null),text:"Bucket",on_click:function(){n.to_selection_bucket()}},{icon:f.default.createElement(Se.default,null),text:"Crop",on_click:function(){n.to_selection_crop()}},{icon:f.default.createElement(Ne.default,null),text:"Invert",on_click:function(){n.to_selection_invert()}},{icon:f.default.createElement(ze.default,null),text:"Copy",on_click:function(){n.copy_selection()}},{icon:f.default.createElement(je.default,null),text:"Cut",on_click:function(){n.cut_selection()}},{icon:f.default.createElement(Me.default,null),text:"Erase",on_click:function(){n.erase_selection()}}].map((function(e){return f.default.createElement(T.default,{key:e.text,button:!0,divider:!0,onClick:e.on_click},f.default.createElement(Q.default,null,e.icon),f.default.createElement(G.default,{primary:e.text}))}))),f.default.createElement(Y.default,{style:null===d.pxl_color?{display:"none"}:{},className:a.contextMenuSubheader},"Color"),f.default.createElement(T.default,{button:!0,divider:!0,style:null===d.pxl_color?{display:"none"}:{},disabled:d.pxl_color===r||null===d.pxl_color,onClick:function(e){t._set_current_color(d.pxl_color),t._handle_relevant_action_event(m,d.pxl_color,1,!0)}},f.default.createElement(Q.default,null,f.default.createElement(oe.default,{style:{color:d.pxl_color,background:"repeating-conic-gradient(#80808055 0% 25%, #00000000 0% 50%) 50% / calc(200% / "+i+") calc(200% / "+l+")"}})),f.default.createElement(G.default,{primary:"Pick color"})),f.default.createElement(T.default,{button:!0,divider:!0,style:null===d.pxl_color?{display:"none"}:{},disabled:d.pxl_color===r||null===d.pxl_color,onClick:function(e){t._exchange_pixel_colors(d.pos_x,d.pos_y,r+""),t._handle_relevant_action_event(m,r,1,!0)}},f.default.createElement(Q.default,null,f.default.createElement(oe.default,{style:{color:r,background:"repeating-conic-gradient(#80808055 0% 25%, #00000000 0% 50%) 50% / calc(200% / "+i+") calc(200% / "+l+")"}})),f.default.createElement(G.default,{primary:"Replace color"})),f.default.createElement(Y.default,{className:a.contextMenuSubheader},"Effect"),f.default.createElement(T.default,{button:!0,divider:!0,onClick:function(e){return t._to_auto_medium_more_contrast()}},f.default.createElement(Q.default,null,f.default.createElement(be.default,null)),f.default.createElement(G.default,{primary:"Increase contrast"})),f.default.createElement(T.default,{button:!0,divider:!0,onClick:function(e){return t._to_auto_medium_more_saturation()}},f.default.createElement(Q.default,null,f.default.createElement(be.default,null)),f.default.createElement(G.default,{primary:"Increase saturation"})),f.default.createElement(T.default,{button:!0,divider:!0,onClick:function(e){return t._handle_edit_drawer_open(null,6)}},f.default.createElement(Q.default,null,f.default.createElement(ne.default,null)),f.default.createElement(G.default,{primary:"Add a filter"})),f.default.createElement(T.default,{button:!0,divider:!0,onClick:function(e){n.less_colors_stepped()}},f.default.createElement(Q.default,null,f.default.createElement(we.default,null)),f.default.createElement(G.default,{primary:"Reduce color number"})),f.default.createElement(T.default,{button:!0,divider:!0,onClick:t._less_colors_auto},f.default.createElement(Q.default,null,f.default.createElement(we.default,null)),f.default.createElement(G.default,{primary:"To auto colors number"})),f.default.createElement(T.default,{button:!0,divider:!0,onClick:function(e){return t._smooth_adjust(1)}},f.default.createElement(Q.default,null,f.default.createElement(ke.default,null)),f.default.createElement(G.default,{primary:"Smooth a bit"})))},this._compute_menu_drawer=function(){var e=t.st4te,a=e.classes,n=e._canvas,r=e._view_name_index,o=e._previous_view_name_index,i=e._view_names,l=e._layers,s=e._layer_index,_=e._is_image_import_mode,u=e._hide_canvas_content,c=e._show_original_image_in_background,d=e._show_transparent_image_in_background,m=e._can_undo,p=e._can_redo,h=e._current_color,g=e._second_color,v=e._slider_value,b=e._tool,y=e._width,w=e._height,x=e._import_size,k=e._import_colorize,E=e._hue,S=e._filters,C=e._select_mode,I=e._pencil_mirror_mode,T=e._is_something_selected,P=e._is_edit_drawer_open,N=e._menu_data,O=e._less_than_1280w,z=e._slider_value_width,D=e._slider_value_height;N.pos_x=-1===N.pos_x?"out":N.pos_x,N.pos_y=-1===N.pos_y?"out":N.pos_y,O?t.drawer_mobile=f.default.createElement(f.default.Fragment,null,f.default.createElement(L.default,{className:a.contentDrawer,disableBackdropTransition:!1,disableSwipeToOpen:!1,disableDiscovery:!1,disablePortal:!0,keepMounted:!0,hysteresis:.314,minFlingVelocity:314,swipeAreaWidth:128,open:!!P,onOpen:t._handle_edit_drawer_open,onClose:t._handle_edit_drawer_close,classes:{paper:a.swipeableDrawerPaper,modal:a.drawerModal},transitionDuration:{appear:5,enter:50,exit:75},ModalProps:{disablePortal:!0,BackdropProps:{classes:{root:a.drawerModalBackdropRoot}}},variant:"temporary",anchor:"bottom",style:{pointerEvents:"all"}},f.default.createElement("div",{className:a.mobileintrovideowrapper},f.default.createElement("video",{className:a.mobileintrovideo,id:"labintro-video",width:"56",height:"56",onClick:t._resume_video,style:{aspectRatio:"1",transform:"translateZ(10px)"}},f.default.createElement("source",{src:"/src/videos/labintro.mp4",type:"video/mp4"}))),f.default.createElement(le.default,{onClick:t._handle_edit_drawer_close}),f.default.createElement("div",{style:{display:"grid",contain:"layout paint style"}},f.default.createElement("div",{style:{boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px -1px, rgb(0 0 0 / 14%) 0px 4px 5px 0px, rgb(0 0 0 / 12%) 0px 1px 10px 0px",zIndex:1}},f.default.createElement("div",{className:a.drawerHeader},f.default.createElement(R.default,{className:a.effectSliderText,id:"strength-slider",gutterBottom:!0},"Effect strength :"),f.default.createElement(A.default,{key:"slider-"+(255*v|0),className:a.effectSlider,defaultValue:parseFloat(v),step:1/255,min:0,max:1,onChangeCommitted:t._set_value_from_slider_with_update,"aria-labelledby":"strength-slider"}))),f.default.createElement("div",{className:a.drawerContainer,ref:t._set_toolbox_container_ref},f.default.createElement(me.default,{should_update:P,slider_value_width:z,slider_value_height:D,onActionClose:t._handle_edit_drawer_close,canvas:n,is_mobile:Mt,view_class:a.listOfTools,view_names:i,is_image_import_mode:_,can_undo:m,can_redo:p,view_name_index:r,previous_view_name_index:o,layers:l,layer_index:s,hide_canvas_content:u,show_original_image_in_background:c,show_transparent_image_in_background:d,hue:E,current_color:h,second_color:g,slider_value:v,tool:b,width:parseInt(y),height:parseInt(w),filters:S,select_mode:C,pencil_mirror_mode:I,is_something_selected:T,import_size:x,import_colorize:k,set_filters_callback:t._set_filters_callback,set_props_callback:t._set_props_callback,set_tool:t._set_tool,set_select_mode:t._set_select_mode,set_pencil_mirror_mode:t._set_pencil_mirror_mode,set_width_from_slider:t._set_width_from_slider,set_height_from_slider:t._set_height_from_slider,set_import_size:t._set_import_size,set_import_colorize:t._set_import_colorize,switch_with_second_color:t._switch_with_second_color,show_hide_canvas_content:t._show_hide_canvas_content,show_hide_background_image:t._show_hide_background_image,show_hide_transparent_image:t._show_hide_transparent_image,on_current_color_change:t._handle_current_color_change,on_view_name_change:t._handle_view_name_change,on_upload_image:function(e){window.dispatchEvent(new Event("art-upload-drawer")),t._upload_image(e)},on_upload_image_library:t._upload_image_library,on_import_image:function(e){window.dispatchEvent(new Event("art-import-drawer")),t._handle_file_import(e)},on_import_image_library:t._import_image_library,on_request_draw_text:t._open_text,on_download_image:t._download_image,on_download_svg:t._download_svg,on_scroll_to:t._scroll_to_drawer})))),f.default.createElement("div",{className:a.fatabs,style:P&&O?{transform:"translateY(24px)",backgroundColor:"#fff"}:{}},f.default.createElement(B.default,{className:a.tabs,style:{pointerEvents:"all"},variant:"fullWidth",scrollButtons:"off",indicatorColor:"primary",textColor:"primary",selectionFollowsFocus:!0,value:r,onChange:t._handle_edit_drawer_open},f.default.createElement(q.default,{className:a.tab,label:"colors",icon:f.default.createElement(ut.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"image",icon:f.default.createElement(dt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"layers",icon:f.default.createElement(pt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"tools",icon:f.default.createElement(ht.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"select",icon:f.default.createElement(vt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"effects",icon:f.default.createElement(yt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"filters",icon:f.default.createElement(xt.default,null)})))):t.drawer_desktop=f.default.createElement(U.default,{className:a.contentDrawerFixed,variant:"permanent",anchor:"right",classes:{paper:a.drawerPaper}},f.default.createElement("div",{style:{display:"contents",pointerEvents:"all"}},f.default.createElement("div",{style:{boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px -1px, rgb(0 0 0 / 14%) 0px 4px 5px 0px, rgb(0 0 0 / 12%) 0px 1px 10px 0px",zIndex:1}},f.default.createElement("div",{className:a.drawerHeader},f.default.createElement("div",{className:a.desktopintrovideowrapper},f.default.createElement("video",{className:a.desktopintrovideo,id:"labintro-video",width:"56",height:"56",onClick:t._resume_video,style:{aspectRatio:"1",transform:"translateZ(10px)"}},f.default.createElement("source",{src:"/src/videos/labintro.mp4",type:"video/mp4"}))),f.default.createElement("span",{className:a.coordinate},f.default.createElement("span",{id:"fps_el"},"FPS: 0"),f.default.createElement("span",{id:"xy_el"}," | X: out, Y: out ")),f.default.createElement(R.default,{className:a.effectSliderText,id:"strength-slider",gutterBottom:!0},"Effect strength :"),f.default.createElement(A.default,{key:"slider-"+(255*v|0),defaultValue:parseFloat(v),className:a.effectSlider,step:1/255,min:0,max:1,onChangeCommitted:t._set_value_from_slider_with_update,"aria-labelledby":"strength-slider"})),f.default.createElement(B.default,{id:"tabs-desktop",className:a.tabs,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",selectionFollowsFocus:!1,value:r,onChange:function(e,a){t._handle_view_name_change(a)}},f.default.createElement(q.default,{className:a.tab,label:"colors",icon:f.default.createElement(ut.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"image",icon:f.default.createElement(dt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"layers",icon:f.default.createElement(pt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"tools",icon:f.default.createElement(ht.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"select",icon:f.default.createElement(vt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"effects",icon:f.default.createElement(yt.default,null)}),f.default.createElement(q.default,{className:a.tab,label:"filters",icon:f.default.createElement(xt.default,null)}))),f.default.createElement("div",{className:a.drawerContainer,ref:t._set_toolbox_container_ref},f.default.createElement(me.default,{should_update:!Mt,slider_value_width:z,slider_value_height:D,canvas:n,view_class:a.listOfTools,is_mobile:Mt,view_names:i,is_image_import_mode:_,can_undo:m,can_redo:p,view_name_index:r,previous_view_name_index:o,layers:l,layer_index:s,hide_canvas_content:u,show_original_image_in_background:c,show_transparent_image_in_background:d,hue:E,current_color:h,second_color:g,slider_value:v,tool:b,width:parseInt(y),height:parseInt(w),filters:S,select_mode:C,pencil_mirror_mode:I,is_something_selected:T,import_size:x,import_colorize:k,set_filters_callback:t._set_filters_callback,set_props_callback:t._set_props_callback,set_tool:t._set_tool,set_select_mode:t._set_select_mode,set_pencil_mirror_mode:t._set_pencil_mirror_mode,set_width_from_slider:t._set_width_from_slider,set_height_from_slider:t._set_height_from_slider,set_import_size:t._set_import_size,set_import_colorize:t._set_import_colorize,switch_with_second_color:t._switch_with_second_color,show_hide_canvas_content:t._show_hide_canvas_content,show_hide_background_image:t._show_hide_background_image,show_hide_transparent_image:t._show_hide_transparent_image,on_current_color_change:t._handle_current_color_change,on_view_name_change:t._handle_view_name_change,on_upload_image:function(e){window.dispatchEvent(new Event("art-upload-drawer")),t._upload_image(e)},on_upload_image_library:t._upload_image_library,on_import_image:t._handle_file_import,on_import_image_library:t._import_image_library,on_request_draw_text:t._open_text,on_download_image:t._download_image,on_download_svg:t._download_svg,on_scroll_to:t._scroll_to_drawer}))))}},t.default=(0,E.default)(Ht)(Jt)},665:function(e,t,a){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function n(r,o){var i,l;try{l=(i=t[r](o)).value}catch(s){return void a(s)}if(!i.done)return Promise.resolve(l).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(l)}("next")}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(e,t){var a,n;for(a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(){function e(t,a){i(this,e),this.baseUrl=t,this.msgCallback=a||function(){}}var t,a,n,r,s;return l(e,[{key:"generateRandomSeed",value:function(){try{return crypto.getRandomValues(new Uint32Array(1))[0]}catch(e){return Math.round(4294967295*Math.random())}}},{key:"message",value:function(e){var t,a,n,r,o,i,l,s;try{if(a=(t=JSON.parse(e.slice(5))||{}).msg,(this.date_message||Date.now()-3e3)+3e3<=Date.now())switch(this.date_message=Date.now(),a){case"estimation":n=t.rank_eta||0,r=(t.queue_size||0)-1,o=t.rank||0,i="Estimated waiting duration: "+parseInt(n)+" seconds. "+(r>o?"Process will start after "+r+" remaining job"+(r?"s":""):"Process will start immediately"),this.msgCallback(i);break;case"progress":s="Processing: "+(l=(t.progress_data||[])[0]||{}).index+"/"+l.length+" "+l.unit+".",this.msgCallback(s)}}catch(_){}}},{key:"generateRandomId",value:function(){return Math.round(16777215*Math.random()).toString(16).padStart(6,"0")}},{key:"getHeadersJson",value:function(){return{"Content-Type":"application/json"}}},{key:"getHeadersStream",value:function(){return{accept:"text/event-stream"}}},{key:"getHeadersAll",value:function(){return{accept:"*/*"}}},{key:"getUploadUrl",value:function(e){return this.baseUrl+"/upload?upload_id="+e}},{key:"getCreateImagePathUrl",value:function(e){return this.baseUrl+"/file="+e}},{key:"handleLoadComplete",value:(s=o(regeneratorRuntime.mark((function e(t,a,n,r){var i,l,s,_,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===a?"blob":a,i=(t||"/unknown.webp").split("/"),l=i[i.length-1]||"unknown.png",s=l.split(".")[1]||"png",_="image/"+s,s="jpeg"===s?"jpg":s,e.prev=6,e.next=9,new Promise((function(e){var i=this,l=new Image;l.setAttribute("crossorigin","anonymous"),l.onload=o(regeneratorRuntime.mark((function t(){var s,_,u,c,d,m=(d=o(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=document.createElement("canvas")).width=n,a.height=r,a.getContext("2d").drawImage(l,0,0,n,r);try{e(a.toDataURL("image/webp",.75))}catch(o){e(a.toDataURL("image/jpeg",.75))}case 6:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)}),p=(c=o(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=document.createElement("canvas")).width=n,a.height=r,a.getContext("2d").drawImage(l,0,0,n,r);try{a.toBlob(e,"image/webp",.75)}catch(o){a.toBlob(e,"image/jpeg",.75)}case 6:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),f=(u=o(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=document.createElement("canvas")).width=n,a.height=r,(o=a.getContext("2d")).drawImage(l,0,0,n,r),e(o.getImageData(0,0,n,r,{colorSpace:"srgb"}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)});return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=l.naturalHeight||l.height,_=l.naturalWidth||l.width,r=r||s,n=n||_,e.prev=4,e.t0=a.toLowerCase(),e.next="base64"===e.t0?8:"blob"===e.t0?10:"imagedata"===e.t0?12:14;break;case 8:return m(),e.abrupt("break",14);case 10:return p(),e.abrupt("break",14);case 12:return f(),e.abrupt("break",14);case 14:e.next=18;break;case 16:e.prev=16,e.t1=e.catch(4);case 18:case"end":return e.stop()}}),t,i,[[4,16]])}))),l.setAttribute("src",t)}));case 9:u=e.sent,e.t0=a,e.next="blob"===e.t0?13:"base64"===e.t0?15:"imagedata"===e.t0?16:17;break;case 13:return c=new File([u],l,{type:_}),e.abrupt("return",Promise.resolve(c));case 15:case 16:return e.abrupt("return",Promise.resolve(u));case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(6),console.error("Error creating file from URL:",e.t1),e.abrupt("return",Promise.reject());case 23:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(e,t,a,n){return s.apply(this,arguments)})},{key:"uploadFile",value:(r=o(regeneratorRuntime.mark((function e(t,a){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("files",t),e.next=4,fetch(this.getUploadUrl(a),{method:"POST",body:n});case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",Promise.resolve(o[0]||o));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"fetchEventSource",value:(n=o(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:this.getHeadersStream(),method:"GET"});case 2:return a=e.sent,e.abrupt("return",Promise.resolve(a.body.getReader()));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchEventSourceJSON",value:(a=o(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:this.getHeadersJson()});case 2:return a=e.sent,e.next=5,a.clone().text();case 5:return n=e.sent,r=n.replaceAll("event: complete\ndata: ",""),e.abrupt("return",Promise.resolve(JSON.parse(r)));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"readResponse",value:(t=o(regeneratorRuntime.mark((function e(t){var a,n,r,o,i,l,s,_,u,c,d,m,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder("utf-8"),n="",r=!1,o=null;case 4:if(r){e.next=35;break}return e.next=7,t.read();case 7:for(i=e.sent,l=i.value,s=i.done,r=r||s,n+=a.decode(l||new Uint8Array,{stream:!0}),_=(n||"\n").split("\n"),u=!0,c=!1,d=void 0,e.prev=16,m=_[Symbol.iterator]();!(u=(p=m.next()).done);u=!0)f=(f=p.value).trim(),this.message(f),console.log(f),f.includes("complete")&&(r=!0,o=f);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),c=!0,d=e.t0;case 24:e.prev=24,e.prev=25,!u&&m.return&&m.return();case 27:if(e.prev=27,!c){e.next=30;break}throw d;case 30:return e.finish(27);case 31:return e.finish(24);case 32:n=_[_.length-1],e.next=4;break;case 35:return e.abrupt("return",Promise.resolve(o));case 36:case"end":return e.stop()}}),e,this,[[16,20,24,32],[25,,27,31]])}))),function(e){return t.apply(this,arguments)})}]),e}(),_=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://gokaygokay-sd3-long-captioner-v2.hf.space",e))}var a,s,_;return r(t,e),l(t,[{key:"getCreateCaptionsUrl",value:function(){return this.baseUrl+"/call/create_captions_rich"}},{key:"getReadCaptions",value:function(e){return JSON.parse(e.slice(5))}},{key:"readResponse",value:(_=o(regeneratorRuntime.mark((function e(t){var a,n,r,o,i,l,s,_,u,c,d,m,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder("utf-8"),n="",r=!1,o=null;case 4:if(r){e.next=35;break}return e.next=7,t.read();case 7:for(i=e.sent,l=i.value,s=i.done,r=r||s,n+=a.decode(l||new Uint8Array,{stream:!0}),_=(n||"\n").split("\n"),u=!0,c=!1,d=void 0,e.prev=16,m=_[Symbol.iterator]();!(u=(p=m.next()).done);u=!0)f=(f=p.value).trim(),this.message(f),f.includes("complete")&&(r=!0,o=f);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),c=!0,d=e.t0;case 24:e.prev=24,e.prev=25,!u&&m.return&&m.return();case 27:if(e.prev=27,!c){e.next=30;break}throw d;case 30:return e.finish(27);case 31:return e.finish(24);case 32:n=_[_.length-1],e.next=4;break;case 35:return e.abrupt("return",Promise.resolve(o));case 36:case"end":return e.stop()}}),e,this,[[16,20,24,32],[25,,27,31]])}))),function(e){return _.apply(this,arguments)})},{key:"createCaptions",value:(s=o(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.getCreateCaptionsUrl(),{method:"POST",headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:t}]})});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",Promise.resolve(n.event_id));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"run",value:(a=o(regeneratorRuntime.mark((function e(t){var a,n,r,o,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0,"string"!=typeof t){e.next=7;break}return e.next=4,this.handleLoadComplete(t);case 4:a=e.sent,e.next=12;break;case 7:if(!(t instanceof Blob)){e.next=11;break}a=t,e.next=12;break;case 11:return e.abrupt("return",Promise.reject());case 12:return n=this.generateRandomId(),e.next=15,this.uploadFile(a,n);case 15:return r=e.sent,o=this.getCreateCaptionsUrl(),e.next=19,this.createCaptions(r);case 19:return i=e.sent,e.next=22,this.fetchEventSourceJSON(o+"/"+i);case 22:return l=e.sent,e.abrupt("return",Promise.resolve(l[0]));case 24:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}]),t}(s),u=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://gokaygokay-florence-2.hf.space",e))}var a;return r(t,e),l(t,[{key:"getPredictHeader",value:function(e,t,a,n,r,o){return o=o||1,{headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e,url:t,orig_name:"image."+n.replaceAll("image/",""),size:a,mime_type:n,meta:{_type:"gradio.FileData"}},1===o?"Caption":2===o?"Detailed Caption":"More Detailed Caption","","microsoft/Florence-2-large"],event_data:null,fn_index:4,trigger_id:10,session_hash:r}),method:"POST"}}},{key:"getQueueJoinUrl",value:function(){return this.baseUrl+"/queue/join"}},{key:"getResultUrl",value:function(e){return this.baseUrl+"/queue/data?session_hash="+e}},{key:"readLine",value:function(e,t){var a,n,r;return console.log(e),e=e.slice(5),(a=JSON.parse(e)).success?(n=((a.output||{}).data||[])[0],r=1===t?n.slice(15,n.length-2):2===t?n.slice(24,n.length-2):n.slice(29,n.length-2),Promise.resolve(r)):Promise.resolve("")}},{key:"run",value:(a=o(regeneratorRuntime.mark((function e(t,a){var n,r,o,i,l,s,_,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,"string"!=typeof t){e.next=7;break}return e.next=4,this.handleLoadComplete(t);case 4:n=e.sent,e.next=12;break;case 7:if(!(t instanceof Blob)){e.next=11;break}n=t,e.next=12;break;case 11:case 35:return e.abrupt("return",Promise.reject());case 12:return r=this.generateRandomId(),e.next=15,this.uploadFile(n,r);case 15:return o=e.sent,i=this.getCreateImagePathUrl(o),l=this.getPredictHeader(o,i,n.size,n.type,r,a),e.next=20,fetch(this.getQueueJoinUrl(),l);case 20:return s=e.sent,e.next=23,s.json();case 23:if(!e.sent.event_id){e.next=35;break}return e.next=28,this.fetchEventSource(this.getResultUrl(r));case 28:return _=e.sent,e.next=31,this.readResponse(_);case 31:return u=e.sent,e.abrupt("return",this.readLine(u,a));case 36:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})}]),t}(s),c=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://kenjiedec-rembg.hf.space",e))}var a;return r(t,e),l(t,[{key:"getQueuePushUrl",value:function(){return this.baseUrl+"/api/queue/push/"}},{key:"getPredictHeader",value:function(e,t){return{headers:this.getHeadersJson(),body:JSON.stringify({action:"predict",data:[e,"Mask only","isnet-general-use"],fn_index:0,session_hash:t}),method:"POST"}}},{key:"getQueueStatusUrl",value:function(){return this.baseUrl+"/api/queue/status/"}},{key:"getResultHeader",value:function(e){return{headers:this.getHeadersJson(),body:JSON.stringify({hash:e}),method:"POST"}}},{key:"run",value:(a=o(regeneratorRuntime.mark((function e(t,a,n){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o(regeneratorRuntime.mark((function e(i,l){var s,_,u,c,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=void 0,"string"==typeof t){e.next=7;break}return e.next=4,r.handleLoadComplete(t,"base64");case 4:s=e.sent,e.next=14;break;case 7:if(!t.startsWith("blob:")){e.next=13;break}return e.next=10,r.handleLoadComplete(t,"base64");case 10:s=e.sent,e.next=14;break;case 13:s=t;case 14:return _=r.generateRandomId(),e.next=17,fetch(r.getQueuePushUrl(),r.getPredictHeader(s,_));case 17:return e.next=19,e.sent.json();case 19:u=e.sent,c=u.hash,d=setTimeout((function(){clearInterval(m),l()}),1e4),m=setInterval(o(regeneratorRuntime.mark((function e(){var t,o,l,s,_,u,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r.getQueueStatusUrl(),r.getResultHeader(c));case 2:return e.next=4,e.sent.json();case 4:if(t=e.sent,o=t.data||{},!(l=o.data||[]).length){e.next=18;break}return e.next=10,r.handleLoadComplete(l[0],"imagedata",a,n);case 10:for(s=e.sent,_=s.data,u=[],p=0,f=_.length;(0|p)<(0|f);p=p+4|0)(0|(_[0|p]+_[p+1|0]+_[p+2|0]|0)/3)<32&&u.push(p/4|0);i(u),clearInterval(m),clearTimeout(d);case 18:case"end":return e.stop()}}),e,r)}))),1e3);case 23:case"end":return e.stop()}}),e,r)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})}]),t}(s),d=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://pixart-alpha-pixart-sigma.hf.space",e))}var a,s;return r(t,e),l(t,[{key:"getPredictHeader",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"(No style)",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"bad shape, disformed, photography, photo, realistic, photo-realistic.",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"DPM-Solver",s=this.generateRandomSeed();return o="string"==typeof o?o:["(No style)","Pixel Art","Digital Art","Anime","Manga"][o],{headers:this.getHeadersJson(),body:JSON.stringify({data:["A pixel art (retro style video game palette artwork) of : "+e,i,o,!0,r,s,a,n,l,4.5,3.5,17,25,!0],event_data:null,fn_index:3,trigger_id:7,session_hash:t}),method:"POST"}}},{key:"getQueueJoinUrl",value:function(){return this.baseUrl+"/queue/join"}},{key:"getResultUrl",value:function(e){return this.baseUrl+"/queue/data?session_hash="+e}},{key:"readResponse",value:(s=o(regeneratorRuntime.mark((function e(t){var a,n,r,o,i,l,s,_,u,c,d,m,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder("utf-8"),n="",r=!1,o=null;case 4:if(r){e.next=35;break}return e.next=7,t.read();case 7:for(i=e.sent,l=i.value,s=i.done,r=r||s,n+=a.decode(l||new Uint8Array,{stream:!0}),_=(n||"\n").split("\n"),u=!0,c=!1,d=void 0,e.prev=16,m=_[Symbol.iterator]();!(u=(p=m.next()).done);u=!0)f=(f=p.value).trim(),this.message(f),f.includes("complete")&&(r=!0,o=f);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),c=!0,d=e.t0;case 24:e.prev=24,e.prev=25,!u&&m.return&&m.return();case 27:if(e.prev=27,!c){e.next=30;break}throw d;case 30:return e.finish(27);case 31:return e.finish(24);case 32:n=_[_.length-1],e.next=4;break;case 35:return e.abrupt("return",Promise.resolve(o));case 36:case"end":return e.stop()}}),e,this,[[16,20,24,32],[25,,27,31]])}))),function(e){return s.apply(this,arguments)})},{key:"extractLastImageUrl",value:function(e,t){var a,n,r,o,i,l,s;try{for(console.log(e),a=JSON.parse(e.slice(5).trim()),n=[],r=a.output.data||[],o=0;o<r.length;o++)for(i=r[o],l=0;l<i.length;l++)(s=i[l]).image&&s.image.url&&n.push(s.image.url);return n}catch(_){return console.error("Failed to parse JSON or extract image URLs:",_),[]}}},{key:"run",value:(a=o(regeneratorRuntime.mark((function e(t){var a,n,r,o,i,l,s,_,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,d=this,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.generateRandomId(),n=this.getPredictHeader(t,a,c,m,p,1),r=this.getQueueJoinUrl(),e.next=5,fetch(r,n);case 5:return o=e.sent,e.next=8,o.json();case 8:if(!e.sent.event_id){e.next=27;break}return e.next=13,this.fetchEventSource(this.getResultUrl(a));case 13:return i=e.sent,e.next=16,this.readResponse(i);case 16:if(l=e.sent,1!==(s=this.extractLastImageUrl(l)).length){e.next=26;break}return _=s[0],e.next=22,this.handleLoadComplete(_,"imagedata");case 22:return u=e.sent,e.abrupt("return",Promise.resolve(u));case 26:return e.abrupt("return",Promise.allSettled([s.map((function(){return d.handleLoadComplete(r,"imagedata")}))]));case 27:return e.abrupt("return",Promise.reject());case 28:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}]),t}(s),m=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://abidlabs-face-to-all.hf.space",e))}var a,s;return r(t,e),l(t,[{key:"getPredictUrl",value:function(){return this.baseUrl+"/run/predict"}},{key:"getPredictHeader",value:function(e,t){return{headers:this.getHeadersJson(),body:JSON.stringify({data:[e],event_data:null,fn_index:0,trigger_id:11,session_hash:t}),method:"POST"}}},{key:"getQueueJoinUrl",value:function(){return this.baseUrl+"/queue/join"}},{key:"extractSecondImageUrl",value:function(e){var t=e.match(/"url":"(https:\/\/[^"]+)"/g);return t&&t.length>1?t[1].match(/"url":"(https:\/\/[^"]+)"/)[1]:null}},{key:"getQueueJoinHeader",value:function(e,t,a,n,r,o){var i="A 2D illustration in retro game style pixel art of "+r.replaceAll("\\n","").replaceAll("\\","")+' in lucasarts style. Video game, low color number, high quality."';return{headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e,url:t,orig_name:"image."+n.replaceAll("image/",""),size:a,mime_type:n,meta:{_type:"gradio.FileData"}},i,"Realistic, photography, real, CGI, 3D.",.95,null,.9,.12,7.75,.8,null,null],event_data:null,fn_index:6,trigger_id:18,session_hash:o}),method:"POST"}}},{key:"getQueueDataUrl",value:function(e){return this.baseUrl+"/queue/data?session_hash="+e}},{key:"readResponse",value:(s=o(regeneratorRuntime.mark((function e(t){var a,n,r,o,i,l,s,_,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder("utf-8"),n="",r="",o=!1;case 3:if(o){e.next=16;break}return e.next=6,t.read();case 6:for(i=e.sent,l=i.value,s=i.done,o=o||s,n+="".concat(a.decode(l||new Uint8Array,{stream:!0})),_=(n||"\n").split("\n"),u=0;u<_.length;u++)c=_[u].trim(),this.message(c),c.includes("complete")&&(o=!0,r=c);n=_[_.length-1],e.next=3;break;case 16:return e.abrupt("return",Promise.resolve(r));case 17:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"run",value:(a=o(regeneratorRuntime.mark((function e(t,a){var n,r,o,i,l,s,_,u,c,d,m,p,f,h,g,v,b,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://civitai.com/models/247890/lucasarts-adventure-game-style-xl";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,"string"!=typeof t){e.next=7;break}return e.next=4,this.handleLoadComplete(t);case 4:n=e.sent,e.next=12;break;case 7:if(!(t instanceof Blob)){e.next=11;break}n=t,e.next=12;break;case 11:case 47:return e.abrupt("return",Promise.reject());case 12:return r=this.generateRandomId(),o=this.generateRandomId(),i=this.getPredictHeader(y,o),l=this.getPredictUrl(),e.next=18,fetch(l,i);case 18:return s=e.sent,_=s.ok,e.next=22,this.uploadFile(n,r);case 22:if(u=e.sent,c=this.getCreateImagePathUrl(u),!_||!c){e.next=47;break}return d=this.getQueueJoinHeader(u,c,n.size,n.type,a,o),m=this.getQueueJoinUrl(),e.next=29,fetch(m,d);case 29:return p=e.sent,e.next=32,p.json();case 32:if(void 0===e.sent.event_id){e.next=47;break}return f=this.getQueueDataUrl(o),e.next=38,this.fetchEventSource(f);case 38:return h=e.sent,e.next=41,this.readResponse(h);case 41:return g=e.sent,v=this.extractSecondImageUrl(g),e.next=45,this.handleLoadComplete(v);case 45:return b=e.sent,e.abrupt("return",Promise.resolve(b));case 48:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})}]),t}(s),p=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"https://multimodalart-face-to-all.hf.space",e))}var a,s;return r(t,e),l(t,[{key:"getPredictUrl",value:function(){return this.baseUrl+"/queue/join"}},{key:"getPredictHeader",value:function(e,t){return{headers:this.getHeadersJson(),body:JSON.stringify({data:[e],event_data:null,fn_index:0,trigger_id:11,session_hash:t}),method:"POST"}}},{key:"getCheckHeader",value:function(e){return{headers:this.getHeadersJson(),body:JSON.stringify({data:[null,null],event_data:null,fn_index:5,trigger_id:18,session_hash:e}),method:"POST"}}},{key:"getQueueJoinUrl",value:function(){return this.baseUrl+"/queue/join"}},{key:"extractSecondImageUrl",value:function(e){var t=e.match(/"url":"(https:\/\/[^"]+)"/g);return t&&t.length>1?t[1].match(/"url":"(https:\/\/[^"]+)"/)[1]:null}},{key:"getQueueJoinHeader",value:function(e,t,a,n,r,o){var i="A 2D illustration in retro video game art of style pixel art of : "+r.replaceAll("\\n","").replaceAll("\\","")+' in lucasarts style. palette, high quality, truthful shapes and colors, great ouput."';return{headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e,url:t,orig_name:"image."+n.replaceAll("image/",""),size:a,mime_type:n,meta:{_type:"gradio.FileData"}},i,"Realistic, Photography, Real, Photo-realistic, CGI, 3D, Screenshot, Filters, Retro, Bad Quality, Worst settings, bad shapes.",.9,null,.85,.1,7,.8,null,null],event_data:null,fn_index:6,trigger_id:18,session_hash:o}),method:"POST"}}},{key:"getQueueDataUrl",value:function(e){return this.baseUrl+"/queue/data?session_hash="+e}},{key:"readResponse",value:(s=o(regeneratorRuntime.mark((function e(t){var a,n,r,o,i,l,s,_,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder("utf-8"),n="",r="",o=!1;case 3:if(o){e.next=16;break}return e.next=6,t.read();case 6:for(i=e.sent,l=i.value,s=i.done,o=o||s,n+="".concat(a.decode(l||new Uint8Array,{stream:!0})),_=(n||"\n").split("\n"),u=0;u<_.length;u++)c=_[u].trim(),this.message(c),c.includes("complete")&&c.includes('success":true')&&!c.includes("custom_lora_card")&&!c.includes('data":[]')&&(o=!0,r=c);n=_[_.length-1],e.next=3;break;case 16:return e.abrupt("return",Promise.resolve(r));case 17:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"run",value:(a=o(regeneratorRuntime.mark((function e(t,a){var n,r,o,i,l,s,_,u,c,d,m,p,f,h,g,v,b,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://civitai.com/models/247890/lucasarts-adventure-game-style-xl";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,"string"!=typeof t){e.next=7;break}return e.next=4,this.handleLoadComplete(t);case 4:n=e.sent,e.next=12;break;case 7:if(!(t instanceof Blob)){e.next=11;break}n=t,e.next=12;break;case 11:case 47:return e.abrupt("return",Promise.reject());case 12:return r=this.generateRandomId(),o=this.generateRandomId(),i=this.getPredictHeader(y,o),l=this.getPredictUrl(),e.next=18,fetch(l,i);case 18:return s=e.sent,_=s.ok,e.next=22,this.uploadFile(n,r);case 22:if(u=e.sent,c=this.getCreateImagePathUrl(u),!_||!c){e.next=47;break}return d=this.getQueueJoinHeader(u,c,n.size,n.type,a,o),m=this.getQueueJoinUrl(),e.next=29,fetch(m,d);case 29:return p=e.sent,e.next=32,p.json();case 32:if(void 0===e.sent.event_id){e.next=47;break}return f=this.getQueueDataUrl(o),e.next=38,this.fetchEventSource(f);case 38:return h=e.sent,e.next=41,this.readResponse(h);case 41:return g=e.sent,v=this.extractSecondImageUrl(g),e.next=45,this.handleLoadComplete(v);case 45:return b=e.sent,e.abrupt("return",Promise.resolve(b));case 48:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})}]),t}(s);e.exports={HuggingFaceAPI:s,FaceToAllAPI:m,FaceToAllAPI2:p,FloranceCaptionerAPI:u,LongCaptionerAPI:_,RemoveBackgroundAPI:c,ImageCreatorAPI:d}},667:function(e,t,a){"use strict";var n=new(a(267).B64chromium);e.exports={bytesToBase64:n.bytesToBase64.bind(n),base64ToBytes:n.base64ToBytes.bind(n)}}}]);